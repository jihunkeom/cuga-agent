"use strict";(self.webpackChunk_carbon_ai_chat_examples_web_components_basic=self.webpackChunk_carbon_ai_chat_examples_web_components_basic||[]).push([[3424],{3683:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,"/* Policy Playbook Component Styles */\n\n.policy-playbook-container {\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n  border: 2px solid #3b82f6;\n  border-radius: 12px;\n  padding: 20px;\n  margin: 16px 0;\n  box-shadow: 0 4px 6px rgba(59, 130, 246, 0.1);\n  animation: slideIn 0.4s ease-out;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.policy-playbook-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid rgba(59, 130, 246, 0.2);\n}\n\n.policy-playbook-icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  box-shadow: 0 4px 6px rgba(59, 130, 246, 0.2);\n}\n\n.policy-playbook-title {\n  flex: 1;\n}\n\n.policy-playbook-title h3 {\n  margin: 0 0 6px 0;\n  font-size: 20px;\n  font-weight: 700;\n  color: #1e40af;\n}\n\n.policy-playbook-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(59, 130, 246, 0.15);\n  color: #1e40af;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.policy-playbook-content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.policy-playbook-message {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border-left: 4px solid #3b82f6;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.policy-playbook-message .message-icon {\n  color: #3b82f6;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.policy-playbook-message p {\n  margin: 0;\n  color: #1e293b;\n  font-size: 15px;\n  line-height: 1.6;\n  font-weight: 500;\n}\n\n.policy-playbook-details {\n  background: rgba(255, 255, 255, 0.7);\n  border-radius: 8px;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.policy-detail-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 14px;\n}\n\n.policy-detail-label {\n  font-weight: 600;\n  color: #64748b;\n  min-width: 140px;\n}\n\n.policy-detail-value {\n  color: #1e293b;\n  font-weight: 500;\n}\n\n.policy-id {\n  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\n  font-size: 13px;\n  padding: 4px 8px;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 4px;\n}\n\n.confidence-bar-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n\n.confidence-bar {\n  flex: 1;\n  height: 8px;\n  background: rgba(59, 130, 246, 0.2);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.confidence-bar-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);\n  border-radius: 4px;\n  transition: width 0.6s ease-out;\n}\n\n.confidence-value {\n  font-weight: 600;\n  color: #3b82f6;\n  min-width: 45px;\n  text-align: right;\n}\n\n.playbook-steps-section {\n  margin-top: 8px;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n\n.steps-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 16px;\n  color: #1e40af;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.steps-header svg {\n  color: #3b82f6;\n}\n\n.steps-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.step-item {\n  display: flex;\n  gap: 12px;\n  padding: 12px;\n  background: #f8fafc;\n  border-radius: 6px;\n  border-left: 3px solid #3b82f6;\n}\n\n.step-number {\n  width: 32px;\n  height: 32px;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 14px;\n  flex-shrink: 0;\n}\n\n.step-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.step-instruction {\n  font-weight: 600;\n  color: #1e293b;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.step-outcome {\n  font-size: 13px;\n  color: #64748b;\n  line-height: 1.5;\n}\n\n.outcome-label {\n  font-weight: 600;\n  color: #475569;\n}\n\n.step-tools {\n  font-size: 12px;\n  color: #64748b;\n  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\n}\n\n.tools-label {\n  font-weight: 600;\n  color: #475569;\n}\n\n.playbook-guidance-section {\n  margin-top: 8px;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n\n.guidance-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  color: #1e40af;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.guidance-header svg {\n  color: #3b82f6;\n}\n\n.guidance-text {\n  color: #475569;\n  font-size: 14px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n  .policy-playbook-container {\n    background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);\n    border-color: #3b82f6;\n  }\n\n  .policy-playbook-title h3 {\n    color: #93c5fd;\n  }\n\n  .policy-playbook-badge {\n    background: rgba(59, 130, 246, 0.25);\n    color: #93c5fd;\n  }\n\n  .policy-playbook-message {\n    background: rgba(255, 255, 255, 0.05);\n  }\n\n  .policy-playbook-message p {\n    color: #e2e8f0;\n  }\n\n  .policy-playbook-details {\n    background: rgba(255, 255, 255, 0.03);\n  }\n\n  .policy-detail-value {\n    color: #e2e8f0;\n  }\n\n  .playbook-steps-section,\n  .playbook-guidance-section {\n    background: rgba(255, 255, 255, 0.05);\n    border-color: rgba(59, 130, 246, 0.3);\n  }\n\n  .step-item {\n    background: rgba(255, 255, 255, 0.05);\n  }\n\n  .step-instruction {\n    color: #e2e8f0;\n  }\n\n  .guidance-text {\n    color: #cbd5e1;\n  }\n}\n\n",""]),t.A=o},8520:function(e,t,n){n.d(t,{A:function(){return x}});var a=n(7378),l=n(83281),r=n(67733),o=n.n(r),i=n(48034),s=n.n(i),c=n(62562),d=n.n(c),m=n(39805),p=n.n(m),u=n(57577),g=n.n(u),b=n(79062),f=n.n(b),h=n(35901),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();o()(h.A,y),h.A&&h.A.locals&&h.A.locals;var x=({data:e})=>{const{content:t,metadata:n}=e,r=Math.round(100*n.policy_confidence);return a.createElement("div",{className:"policy-block-container"},a.createElement("div",{className:"policy-block-header"},a.createElement("div",{className:"policy-block-icon"},a.createElement(l.ekZ,{size:24})),a.createElement("div",{className:"policy-block-title"},a.createElement("h3",null,"Intent Blocked by Policy"),a.createElement("span",{className:"policy-block-badge"},"Security Policy"))),a.createElement("div",{className:"policy-block-content"},a.createElement("div",{className:"policy-block-message"},a.createElement(l.RIJ,{size:18,className:"message-icon"}),a.createElement("p",null,t)),a.createElement("div",{className:"policy-block-details"},a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Policy Name:"),a.createElement("span",{className:"policy-detail-value"},n.policy_name)),a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Policy ID:"),a.createElement("span",{className:"policy-detail-value policy-id"},n.policy_id)),a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Match Confidence:"),a.createElement("div",{className:"confidence-bar-container"},a.createElement("div",{className:"confidence-bar"},a.createElement("div",{className:"confidence-bar-fill",style:{width:`${r}%`}})),a.createElement("span",{className:"confidence-value"},r,"%"))),a.createElement("div",{className:"policy-reasoning-section"},a.createElement("div",{className:"reasoning-header"},a.createElement(l.R2D,{size:16}),a.createElement("span",null,"Reasoning")),a.createElement("p",{className:"reasoning-text"},n.policy_reasoning)))))}},17933:function(e,t,n){n.d(t,{Y:function(){return E}});var a=n(7378),l=n(83281),r=n(61994),o=n(67733),i=n.n(o),s=n(48034),c=n.n(s),d=n(62562),m=n.n(d),p=n(39805),u=n.n(p),g=n(57577),b=n.n(g),f=n(79062),h=n.n(f),y=n(84870),x={};x.styleTagTransform=h(),x.setAttributes=u(),x.insert=m().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=b();i()(y.A,x),y.A&&y.A.locals&&y.A.locals;const v="Not initialized";function E({threadId:e}){const[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[p,u]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),f=(0,a.useCallback)(async()=>{if(!e||e===v)return m("No thread ID available"),void i(null);c(!0),m(null);try{const t=await fetch(`${r.JR}/api/agent/state`,{method:"GET",headers:{"X-Thread-ID":e}});if(503===t.status)return void i({thread_id:e,state:null,variables:{},variables_count:0,message:"Agent graph not initialized"});if(!t.ok)throw new Error(`Failed to fetch state: ${t.status} ${t.statusText}`);const n=await t.json();i(n)}catch(e){m(e instanceof Error?e.message:"Failed to fetch agent state")}finally{c(!1)}},[e]);(0,a.useEffect)(()=>{t&&e&&f()},[t,e,f]),(0,a.useEffect)(()=>{if(!p||!t||!e)return;const n=setInterval(()=>{f()},2e3);return()=>clearInterval(n)},[p,t,e,f]);return a.createElement("div",{className:"debug-panel-container"},a.createElement("button",{className:"debug-panel-toggle",onClick:()=>n(!t),title:"Toggle Debug Panel"},a.createElement(l.zPv,{size:16}),a.createElement("span",null,"Debug"),t?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),t&&a.createElement("div",{className:"debug-panel-content"},a.createElement("div",{className:"debug-panel-header"},a.createElement("h3",null,"Debug Information"),a.createElement("div",{className:"debug-panel-actions"},a.createElement("button",{className:"debug-action-btn",onClick:f,disabled:s,title:"Refresh State"},a.createElement(l.e9t,{size:14,className:s?"spinning":""})),a.createElement("label",{className:"debug-auto-refresh"},a.createElement("input",{type:"checkbox",checked:p,onChange:e=>u(e.target.checked)}),a.createElement("span",null,"Auto-refresh")))),a.createElement("div",{className:"debug-section"},a.createElement("div",{className:"debug-section-header"},a.createElement("strong",null,"Thread ID"),e&&e!==v&&a.createElement("button",{className:"debug-copy-btn",onClick:()=>{return t=e,navigator.clipboard.writeText(t),b(!0),void setTimeout(()=>b(!1),2e3);var t},title:"Copy Thread ID"},g?a.createElement(l.Jlk,{size:12}):a.createElement(l.QRo,{size:12}))),a.createElement("div",{className:"debug-thread-id"},e||v)),a.createElement("div",{className:"debug-section"},a.createElement("div",{className:"debug-section-header"},a.createElement("strong",null,"Agent State")),s&&a.createElement("div",{className:"debug-loading"},"Loading..."),d&&a.createElement("div",{className:"debug-error"},"Error: ",d),o&&a.createElement("div",{className:"debug-state-content"},a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Thread ID:"),a.createElement("span",{className:"debug-value"},o.thread_id)),a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Variables Count:"),a.createElement("span",{className:"debug-value"},o.variables_count)),o.state?a.createElement(a.Fragment,null,a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Lite Mode:"),a.createElement("span",{className:"debug-value",style:{color:null===o.state.lite_mode?"#94a3b8":o.state.lite_mode?"#10b981":"#f59e0b",fontWeight:600}},null===o.state.lite_mode?"Not Set (using settings)":o.state.lite_mode?"True (Fast/Lite)":"False (Balanced)")),a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Current App:"),a.createElement("span",{className:"debug-value"},o.state.current_app||"N/A")),a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Chat Messages Count:"),a.createElement("span",{className:"debug-value"},o.state.chat_messages_count||0)),a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"URL:"),a.createElement("span",{className:"debug-value"},o.state.url||"N/A")),o.state.input&&a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"Input:"),a.createElement("span",{className:"debug-value"},o.state.input))):a.createElement("div",{className:"debug-state-item"},a.createElement("span",{className:"debug-label"},"State:"),a.createElement("span",{className:"debug-value"},o.message||"No state available")),Object.keys(o.variables).length>0&&a.createElement("div",{className:"debug-state-item debug-variables"},a.createElement("span",{className:"debug-label"},"Variables:"),a.createElement("pre",{className:"debug-json"},(e=>{try{return JSON.stringify(e,null,2)}catch{return String(e)}})(o.variables)))))))}},26944:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,".followup-suggestions-container {\n  margin: 16px 0;\n  padding: 0;\n  animation: fadeInUp 0.3s ease-out;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.followup-suggestions-header {\n  margin-bottom: 12px;\n}\n\n.followup-suggestions-title {\n  font-size: 13px;\n  font-weight: 500;\n  color: #64748b;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.followup-suggestions-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.followup-suggestion-chip {\n  padding: 12px 16px;\n  background: #ffffff;\n  border: 1.5px solid #e2e8f0;\n  border-radius: 8px;\n  font-size: 13px;\n  color: #334155;\n  text-align: left;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-weight: 400;\n  line-height: 1.5;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);\n}\n\n.followup-suggestion-chip:hover {\n  background: #f8fafc;\n  border-color: #cbd5e1;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n  transform: translateY(-1px);\n}\n\n.followup-suggestion-chip:active {\n  transform: translateY(0);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);\n}\n\n",""]),t.A=o},27082:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(7378),l=n(83281);n(33802);function r({onClose:e}){const[t,n]=(0,a.useState)({enableMemory:!0,disableMemory:!1,memoryType:"both",contextWindow:4096,maxMemoryItems:100,semanticSearch:!0,autoSummarization:!0,factStorage:!1,learningFromFailures:!1,blockedMemoryItems:[],saveAndReuse:{enabled:!1,autoGeneralize:!1,minSuccessfulRuns:3,requireApproval:!0,savedTrajectories:[]}}),[r,o]=(0,a.useState)("idle"),[i,s]=(0,a.useState)(""),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await fetch("/api/config/memory");if(e.ok){const t=await e.json();n({enableMemory:t.enableMemory??!0,disableMemory:t.disableMemory??!1,memoryType:t.memoryType??"both",contextWindow:t.contextWindow??4096,maxMemoryItems:t.maxMemoryItems??100,semanticSearch:t.semanticSearch??!0,autoSummarization:t.autoSummarization??!0,factStorage:t.factStorage??!1,learningFromFailures:t.learningFromFailures??!1,blockedMemoryItems:t.blockedMemoryItems??[],saveAndReuse:t.saveAndReuse??{enabled:!1,autoGeneralize:!1,minSuccessfulRuns:3,requireApproval:!0,savedTrajectories:[]}})}}catch(e){}},p=()=>{i.trim()&&!t.blockedMemoryItems.includes(i.trim())&&(n({...t,blockedMemoryItems:[...t.blockedMemoryItems,i.trim()]}),s(""))};return a.createElement("div",{className:"config-modal-overlay",onClick:e},a.createElement("div",{className:"config-modal",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"config-modal-header"},a.createElement("h2",null,"Memory Configuration"),a.createElement("button",{className:"config-modal-close",onClick:e},a.createElement(l.X,{size:20}))),a.createElement("div",{className:"config-modal-content"},a.createElement("div",{className:"config-card"},a.createElement("h3",null,"Memory Settings"),a.createElement("div",{className:"config-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.disableMemory,onChange:e=>{const a=e.target.checked;n({...t,disableMemory:a,enableMemory:!a&&t.enableMemory})}}),a.createElement("span",null,"Disable Memory Completely")),a.createElement("small",null,"Turn off all memory functionality")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.enableMemory,onChange:e=>n({...t,enableMemory:e.target.checked}),disabled:t.disableMemory}),a.createElement("span",null,"Enable Memory System")),a.createElement("small",null,"Allow the agent to remember context across conversations")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Max Memory Items"),a.createElement("input",{type:"number",value:t.maxMemoryItems,onChange:e=>n({...t,maxMemoryItems:parseInt(e.target.value)}),min:"10",max:"1000",disabled:!t.enableMemory||t.disableMemory}),a.createElement("small",null,"Maximum number of memory items to store")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.semanticSearch,onChange:e=>n({...t,semanticSearch:e.target.checked}),disabled:!t.enableMemory||t.disableMemory}),a.createElement("span",null,"Enable Semantic Search")),a.createElement("small",null,"Use embeddings to find relevant memories")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.autoSummarization,onChange:e=>n({...t,autoSummarization:e.target.checked}),disabled:!t.enableMemory||t.disableMemory}),a.createElement("span",null,"Auto-summarization")),a.createElement("small",null,"Automatically summarize long conversations")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.factStorage,onChange:e=>n({...t,factStorage:e.target.checked}),disabled:!t.enableMemory||t.disableMemory}),a.createElement("span",null,"Enable Fact Storage and Retrieval")),a.createElement("small",null,"Store and retrieve important facts like IDs, key values, and persistent information")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.learningFromFailures,onChange:e=>n({...t,learningFromFailures:e.target.checked}),disabled:!t.enableMemory||t.disableMemory}),a.createElement("span",null,"Enable Learning from Failures and Tip Injection")),a.createElement("small",null,"Learn from past failures and analyze trajectories to improve future task performance")),a.createElement("div",{className:"form-group"},a.createElement("div",{className:"form-group-header"},a.createElement("label",null,"Blocked Memory Items"),a.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},a.createElement("input",{type:"text",value:i,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),p())},placeholder:"e.g., passwords, secrets",disabled:t.disableMemory,style:{width:"200px",padding:"4px 8px",fontSize:"12px"}}),a.createElement("button",{className:"add-small-btn",onClick:p,disabled:t.disableMemory||!i.trim()},a.createElement(l.FWt,{size:12}),"Add"))),0===t.blockedMemoryItems.length?a.createElement("div",{className:"policies-empty"},"No blocked items. Add items that the agent should never remember."):a.createElement("div",{className:"policies-list"},t.blockedMemoryItems.map((e,r)=>a.createElement("div",{key:r,className:"policy-item"},a.createElement("span",{style:{flex:1,padding:"8px",fontSize:"13px"}},e),a.createElement("button",{className:"remove-btn",onClick:()=>(e=>{n({...t,blockedMemoryItems:t.blockedMemoryItems.filter(t=>t!==e)})})(e),disabled:t.disableMemory},a.createElement(l.X,{size:14}))))),a.createElement("small",null,"Items the agent is not allowed to remember (e.g., sensitive information, passwords)")))),a.createElement("div",{className:"config-card"},a.createElement("h3",null,"Save & Reuse Trajectories"),a.createElement("div",{className:"config-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.saveAndReuse.enabled,onChange:e=>n({...t,saveAndReuse:{...t.saveAndReuse,enabled:e.target.checked}}),disabled:t.disableMemory}),a.createElement("span",null,"Enable Save & Reuse")),a.createElement("small",null,"Allow agent to save successful task trajectories as reusable tools")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.saveAndReuse.autoGeneralize,onChange:e=>n({...t,saveAndReuse:{...t.saveAndReuse,autoGeneralize:e.target.checked}}),disabled:!t.saveAndReuse.enabled||t.disableMemory}),a.createElement("span",null,"Auto-generalize Trajectories")),a.createElement("small",null,"Automatically identify patterns and create reusable tools from successful tasks")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Min. Successful Runs Before Saving"),a.createElement("input",{type:"number",value:t.saveAndReuse.minSuccessfulRuns,onChange:e=>n({...t,saveAndReuse:{...t.saveAndReuse,minSuccessfulRuns:parseInt(e.target.value)}}),min:"1",max:"10",disabled:!t.saveAndReuse.enabled||t.disableMemory}),a.createElement("small",null,"Number of successful executions before suggesting trajectory as reusable tool")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.saveAndReuse.requireApproval,onChange:e=>n({...t,saveAndReuse:{...t.saveAndReuse,requireApproval:e.target.checked}}),disabled:!t.saveAndReuse.enabled||t.disableMemory}),a.createElement("span",null,"Require User Approval")),a.createElement("small",null,"Ask for permission before saving new trajectories as tools")),a.createElement("div",{className:"form-group",style:{marginTop:"24px"}},a.createElement("label",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px",display:"block"}},"Saved Trajectories (",t.saveAndReuse.savedTrajectories.length,")"),0===t.saveAndReuse.savedTrajectories.length?a.createElement("div",{className:"policies-empty"},"No saved trajectories yet. When enabled, successful task patterns will appear here."):a.createElement("div",{className:"policies-list",style:{maxHeight:"400px",overflowY:"auto"}},t.saveAndReuse.savedTrajectories.map(e=>{const r=c===e.id;return a.createElement("div",{key:e.id,className:"policy-item",style:{flexDirection:"column",alignItems:"stretch"}},a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px"}},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:()=>{return a=e.id,void n({...t,saveAndReuse:{...t.saveAndReuse,savedTrajectories:t.saveAndReuse.savedTrajectories.map(e=>e.id===a?{...e,enabled:!e.enabled}:e)}});var a},disabled:!t.saveAndReuse.enabled||t.disableMemory,style:{cursor:"pointer"}}),a.createElement("div",{style:{flex:1,cursor:"pointer"},onClick:()=>d(r?null:e.id)},a.createElement("div",{style:{fontWeight:600,fontSize:"13px",color:"#1e293b"}},e.name),a.createElement("div",{style:{fontSize:"11px",color:"#64748b",marginTop:"2px"}},e.description)),a.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center",fontSize:"11px",color:"#64748b"}},a.createElement("span",null,"Confidence: ",e.confidence,"%"),a.createElement("span",null,"•"),a.createElement("span",null,e.parameters.length," params")),a.createElement("button",{className:"remove-btn",onClick:()=>{return a=e.id,void n({...t,saveAndReuse:{...t.saveAndReuse,savedTrajectories:t.saveAndReuse.savedTrajectories.filter(e=>e.id!==a)}});var a},disabled:!t.saveAndReuse.enabled||t.disableMemory},a.createElement(l.TBR,{size:14}))),r&&a.createElement("div",{style:{padding:"12px",background:"#f8fafc",borderTop:"1px solid #e5e7eb",fontSize:"12px"}},a.createElement("div",{style:{marginBottom:"12px"}},a.createElement("strong",{style:{color:"#475569",display:"block",marginBottom:"6px"}},"Parameters:"),0===e.parameters.length?a.createElement("div",{style:{color:"#94a3b8",fontStyle:"italic"}},"No parameters"):a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},e.parameters.map((e,t)=>a.createElement("div",{key:t,style:{background:"white",padding:"6px 8px",borderRadius:"4px",border:"1px solid #e5e7eb"}},a.createElement("code",{style:{color:"#667eea",fontWeight:600,fontSize:"11px"}},e.name),a.createElement("span",{style:{color:"#64748b"}},": ",e.type),e.required&&a.createElement("span",{style:{color:"#ef4444",marginLeft:"4px"}},"*"),e.description&&a.createElement("div",{style:{color:"#64748b",fontSize:"11px",marginTop:"2px"}},e.description))))),a.createElement("div",{style:{display:"flex",gap:"16px",fontSize:"11px",color:"#64748b"}},a.createElement("span",null,"Min interactions: ",e.minInteractions),a.createElement("span",null,"•"),a.createElement("span",null,"Created: ",new Date(e.createdAt).toLocaleDateString()))))})),a.createElement("small",{style:{display:"block",marginTop:"8px"}},"Trajectories are automatically learned from successful task completions"))))),a.createElement("div",{className:"config-modal-footer"},a.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),a.createElement("button",{className:`save-btn ${r}`,onClick:async()=>{o("saving");try{(await fetch("/api/config/memory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(o("success"),setTimeout(()=>o("idle"),2e3)):(o("error"),setTimeout(()=>o("idle"),2e3))}catch(e){o("error"),setTimeout(()=>o("idle"),2e3)}},disabled:"saving"===r},a.createElement(l.eMP,{size:16}),"idle"===r&&"Save Changes","saving"===r&&"Saving...","success"===r&&"Saved!","error"===r&&"Error!"))))}},31681:function(e,t,n){n.d(t,{n:function(){return r}});var a=n(7378),l=n(83281);const r=({followupAction:e,callback:t})=>{const[n,r]=(0,a.useState)(""),[o,i]=(0,a.useState)([]),[s,c]=(0,a.useState)(!1),[d]=(0,a.useState)(Date.now()),[m,p]=(0,a.useState)(!0);if(!e)return a.createElement("div",{className:"text-red-500 p-4"},"Error: Invalid action data");const{action_id:u,action_name:g,description:b,type:f,button_text:h,placeholder:y,options:x,max_selections:v,min_selections:E=1,required:w=!0,validation_pattern:k,max_length:N,min_length:C,color:_="primary"}=e;(0,a.useEffect)(()=>{const e=setTimeout(()=>{p(!1)},300);return()=>clearTimeout(e)},[]);const S={primary:{button:"bg-blue-500 hover:bg-blue-600 text-white",accent:"text-blue-600 border-blue-200 bg-blue-50"},success:{button:"bg-green-500 hover:bg-green-600 text-white",accent:"text-green-600 border-green-200 bg-green-50"},warning:{button:"bg-yellow-500 hover:bg-yellow-600 text-white",accent:"text-yellow-600 border-yellow-200 bg-yellow-50"},danger:{button:"bg-red-500 hover:bg-red-600 text-white",accent:"text-red-600 border-red-200 bg-red-50"},secondary:{button:"bg-gray-500 hover:bg-gray-600 text-white",accent:"text-gray-600 border-gray-200 bg-gray-50"}},A=S[_]||S.primary,z=e=>{if(s)return;c(!0);const n=(e=>({action_id:u,response_type:f,timestamp:(new Date).toISOString(),response_time_ms:Date.now()-d,client_info:{user_agent:navigator.userAgent,language:navigator.language,platform:navigator.platform},...e}))(e);t(n)},T=()=>{!n.trim()&&w||k&&!new RegExp(k).test(n)||C&&n.length<C||N&&n.length>N||z({text_response:n})},P=()=>{z({button_clicked:!0})},M=e=>{z({confirmed:e})},I=e=>{let t;if("multi_select"===f)if(o.includes(e))t=o.filter(t=>t!==e);else{if(v&&o.length>=v)return;t=[...o,e]}else t=[e];if(i(t),"select"===f){const e=(x||[]).filter(e=>t.includes(e.value));z({selected_values:t,selected_options:e})}},R=()=>{if(o.length<E)return;const e=(x||[]).filter(e=>o.includes(e.value));z({selected_values:o,selected_options:e})};return a.createElement("div",{className:"bg-white border border-gray-200 rounded p-4 mx-auto"},!m&&a.createElement("div",{className:"mb-4"},a.createElement("div",{className:"flex items-center gap-2 mb-2"},a.createElement("h3",{className:"font-medium text-gray-900 text-sm"},g),w&&a.createElement("span",{className:"text-red-500 text-xs"},"*")),b&&a.createElement("p",{className:"text-gray-600 text-xs"},b)),(()=>{if(m)return a.createElement("div",{className:"flex items-center justify-center py-4"},a.createElement("span",{className:"text-sm text-gray-500"},"Loading..."));if(s)return a.createElement("div",{className:"flex items-center justify-center py-4 text-green-600"},a.createElement("div",{className:"flex items-center space-x-2 bg-green-50 px-4 py-2 rounded border border-green-200"},a.createElement(l.Jlk,{className:"w-5 h-5"}),a.createElement("span",{className:"text-sm font-medium"},"Response submitted successfully!")));switch(f){case"button":return a.createElement("button",{onClick:P,disabled:s,className:`w-full px-4 py-3 rounded font-medium ${A.button} flex items-center justify-center gap-2 ${s?"opacity-50 cursor-not-allowed":""}`},a.createElement("span",null,h||g));case"text_input":case"natural_language":return a.createElement("div",{className:"space-y-3"},a.createElement("textarea",{value:n,onChange:e=>r(e.target.value),placeholder:y||"Enter your response...",disabled:s,className:`w-full px-4 py-3 border border-gray-200 rounded resize-none focus:outline-none focus:border-blue-500 text-sm ${n.trim()?A.accent:""} ${s?"opacity-50 cursor-not-allowed bg-gray-50":""}`,rows:"natural_language"===f?3:1,maxLength:N}),N&&a.createElement("div",{className:"text-xs text-gray-500 text-right"},a.createElement("span",{className:n.length>.8*N?"text-orange-500":""},n.length),"/",N),a.createElement("button",{onClick:T,disabled:s||!n.trim()&&w,className:`px-4 py-2 rounded text-sm font-medium ${s||!n.trim()&&w?"bg-gray-200 text-gray-400 cursor-not-allowed":A.button} flex items-center gap-2`},a.createElement(l.Vnp,{className:"w-4 h-4"}),"Submit"));case"select":return a.createElement("div",{className:"space-y-2"},(x||[]).map(e=>a.createElement("button",{key:e.value,onClick:()=>I(e.value),disabled:s,className:`w-full px-4 py-3 text-left rounded border text-sm ${o.includes(e.value)?A.button:"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${s?"opacity-50 cursor-not-allowed":""}`},a.createElement("div",{className:"font-medium"},e.label),e.description&&a.createElement("div",{className:"text-xs opacity-75 mt-1"},e.description))));case"multi_select":return a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"space-y-2 max-h-48 overflow-y-auto"},(x||[]).map(e=>a.createElement("label",{key:e.value,className:`flex items-start gap-3 p-3 rounded border cursor-pointer ${o.includes(e.value)?A.accent:"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`},a.createElement("input",{type:"checkbox",checked:o.includes(e.value),onChange:()=>I(e.value),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500",disabled:s||!o.includes(e.value)&&!!v&&o.length>=v}),a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"text-sm font-medium"},e.label),e.description&&a.createElement("div",{className:"text-xs text-gray-600 mt-1"},e.description))))),v&&a.createElement("div",{className:"text-xs text-gray-500"},a.createElement("span",{className:o.length===v?"text-orange-500 font-medium":""},o.length),"/",v," selected"),a.createElement("button",{onClick:R,disabled:s||o.length<E,className:`px-4 py-2 rounded text-sm font-medium ${s||o.length<E?"bg-gray-200 text-gray-400 cursor-not-allowed":A.button} flex items-center gap-2`},a.createElement(l.Jlk,{className:"w-4 h-4"}),"Submit (",o.length,")"));case"confirmation":const t="tool_approval"===u,i=e.additional_data?.tool,c=i?.code_preview||[],d=i?.required_tools||[];return a.createElement("div",{className:"space-y-3"},t&&(c.length>0||d.length>0)&&a.createElement("div",{className:"bg-amber-50 border border-amber-200 rounded p-3 text-sm"},d.length>0&&a.createElement("div",{className:"mb-2"},a.createElement("span",{className:"font-semibold text-amber-900"},"Tools requiring approval:"),a.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},d.map((e,t)=>a.createElement("span",{key:t,className:"inline-block bg-amber-100 text-amber-800 px-2 py-0.5 rounded text-xs font-mono"},e)))),c.length>0&&a.createElement("div",null,a.createElement("span",{className:"font-semibold text-amber-900"},"Code Preview:"),a.createElement("pre",{className:"mt-1 bg-gray-800 text-green-400 p-3 rounded text-xs overflow-x-auto font-mono border border-gray-700"},c.join("\n")))),a.createElement("div",{className:"flex gap-3"},a.createElement("button",{onClick:()=>M(!0),disabled:s,className:`flex-1 px-4 py-3 ${t?"bg-amber-500 hover:bg-amber-600":"bg-green-500 hover:bg-green-600"} text-white rounded font-medium flex items-center justify-center gap-2 ${s?"opacity-50 cursor-not-allowed":""}`},a.createElement(l.Jlk,{className:"w-4 h-4"}),t?"Approve & Execute":"Confirm"),a.createElement("button",{onClick:()=>M(!1),disabled:s,className:"flex-1 px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded font-medium flex items-center justify-center gap-2 "+(s?"opacity-50 cursor-not-allowed":"")},a.createElement(l.X,{className:"w-4 h-4"}),t?"Deny":"Cancel")));default:return a.createElement("div",{className:"text-gray-500 text-sm"},"Unsupported action type: ",f)}})())}},35901:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,".policy-block-container {\n  background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%);\n  border: 2px solid #ff6b6b;\n  border-radius: 12px;\n  padding: 20px;\n  margin: 16px 0;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.15);\n  animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.policy-block-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid rgba(255, 107, 107, 0.2);\n}\n\n.policy-block-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);\n  border-radius: 12px;\n  color: white;\n  flex-shrink: 0;\n  box-shadow: 0 4px 8px rgba(255, 107, 107, 0.3);\n}\n\n.policy-block-title {\n  flex: 1;\n}\n\n.policy-block-title h3 {\n  margin: 0 0 6px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #c92a2a;\n}\n\n.policy-block-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  background: #ff6b6b;\n  color: white;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.policy-block-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.policy-block-message {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border-left: 4px solid #ff6b6b;\n}\n\n.message-icon {\n  color: #ff6b6b;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.policy-block-message p {\n  margin: 0;\n  color: #495057;\n  font-size: 15px;\n  line-height: 1.6;\n}\n\n.policy-block-details {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n  padding: 16px;\n  background: rgba(255, 255, 255, 0.7);\n  border-radius: 8px;\n}\n\n.policy-detail-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 14px;\n}\n\n.policy-detail-label {\n  font-weight: 600;\n  color: #868e96;\n  min-width: 140px;\n}\n\n.policy-detail-value {\n  color: #212529;\n  font-weight: 500;\n}\n\n.policy-id {\n  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\n  font-size: 13px;\n  padding: 4px 8px;\n  background: rgba(255, 107, 107, 0.1);\n  border-radius: 4px;\n}\n\n.confidence-bar-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n\n.confidence-bar {\n  flex: 1;\n  height: 8px;\n  background: rgba(255, 107, 107, 0.2);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.confidence-bar-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #ff6b6b 0%, #ff5252 100%);\n  border-radius: 4px;\n  transition: width 0.6s ease-out;\n}\n\n.confidence-value {\n  font-weight: 600;\n  color: #ff6b6b;\n  min-width: 45px;\n  text-align: right;\n}\n\n.policy-reasoning-section {\n  margin-top: 8px;\n  padding: 16px;\n  background: white;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 107, 107, 0.2);\n}\n\n.reasoning-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  color: #495057;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.reasoning-header svg {\n  color: #ff6b6b;\n}\n\n.reasoning-text {\n  margin: 0;\n  color: #495057;\n  font-size: 14px;\n  line-height: 1.6;\n  font-style: italic;\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n  .policy-block-container {\n    background: linear-gradient(135deg, #2d1515 0%, #3d1a1a 100%);\n    border-color: #ff6b6b;\n  }\n\n  .policy-block-message {\n    background: rgba(255, 255, 255, 0.05);\n  }\n\n  .policy-block-message p {\n    color: #e9ecef;\n  }\n\n  .policy-block-details {\n    background: rgba(255, 255, 255, 0.03);\n  }\n\n  .policy-detail-value {\n    color: #e9ecef;\n  }\n\n  .policy-reasoning-section {\n    background: rgba(255, 255, 255, 0.05);\n    border-color: rgba(255, 107, 107, 0.3);\n  }\n\n  .reasoning-text {\n    color: #ced4da;\n  }\n}\n\n",""]),t.A=o},37394:function(e,t,n){n.d(t,{A:function(){return x}});var a=n(7378),l=n(83281),r=n(67733),o=n.n(r),i=n(48034),s=n.n(i),c=n(62562),d=n.n(c),m=n(39805),p=n.n(m),u=n(57577),g=n.n(u),b=n(79062),f=n.n(b),h=n(3683),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();o()(h.A,y),h.A&&h.A.locals&&h.A.locals;var x=({data:e})=>{const{content:t,metadata:n}=e,r=Math.round(100*n.policy_confidence),o=n.playbook_steps||[];return a.createElement("div",{className:"policy-playbook-container"},a.createElement("div",{className:"policy-playbook-header"},a.createElement("div",{className:"policy-playbook-icon"},a.createElement(l.Gyj,{size:24})),a.createElement("div",{className:"policy-playbook-title"},a.createElement("h3",null,"Playbook Activated"),a.createElement("span",{className:"policy-playbook-badge"},"Guided Workflow"))),a.createElement("div",{className:"policy-playbook-content"},a.createElement("div",{className:"policy-playbook-message"},a.createElement(l.g5W,{size:18,className:"message-icon"}),a.createElement("p",null,t||"I'll guide you through this process step by step.")),a.createElement("div",{className:"policy-playbook-details"},a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Playbook Name:"),a.createElement("span",{className:"policy-detail-value"},n.policy_name)),a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Policy ID:"),a.createElement("span",{className:"policy-detail-value policy-id"},n.policy_id)),a.createElement("div",{className:"policy-detail-row"},a.createElement("span",{className:"policy-detail-label"},"Match Confidence:"),a.createElement("div",{className:"confidence-bar-container"},a.createElement("div",{className:"confidence-bar"},a.createElement("div",{className:"confidence-bar-fill",style:{width:`${r}%`}})),a.createElement("span",{className:"confidence-value"},r,"%"))),o.length>0&&a.createElement("div",{className:"playbook-steps-section"},a.createElement("div",{className:"steps-header"},a.createElement(l.R2D,{size:16}),a.createElement("span",null,"Workflow Steps (",o.length,")")),a.createElement("div",{className:"steps-list"},o.map((e,t)=>a.createElement("div",{key:t,className:"step-item"},a.createElement("div",{className:"step-number"},e.step_number),a.createElement("div",{className:"step-content"},a.createElement("div",{className:"step-instruction"},e.instruction),e.expected_outcome&&a.createElement("div",{className:"step-outcome"},a.createElement("span",{className:"outcome-label"},"Expected:")," ",e.expected_outcome),e.tools_allowed&&e.tools_allowed.length>0&&a.createElement("div",{className:"step-tools"},a.createElement("span",{className:"tools-label"},"Tools:")," ",e.tools_allowed.join(", "))))))),n.playbook_guidance&&a.createElement("div",{className:"playbook-guidance-section"},a.createElement("div",{className:"guidance-header"},a.createElement(l.R2D,{size:16}),a.createElement("span",null,"Guidance")),a.createElement("div",{className:"guidance-text"},n.playbook_guidance)))))}},46656:function(e,t,n){n.d(t,{B:function(){return x}});var a=n(7378),l=n(83281),r=n(67733),o=n.n(r),i=n(48034),s=n.n(i),c=n(62562),d=n.n(c),m=n(39805),p=n.n(m),u=n(57577),g=n.n(u),b=n(79062),f=n.n(b),h=n(83809),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();o()(h.A,y),h.A&&h.A.locals&&h.A.locals;function x({onFileSelect:e,onAutocompleteOpen:t,onFileHover:r,disabled:o=!1}){const[i,s]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[m,p]=(0,a.useState)(!1),[u,g]=(0,a.useState)(0),[b,f]=(0,a.useState)(null),h=(0,a.useRef)(""),y=(0,a.useRef)(""),x=(0,a.useRef)(!1),v=(0,a.useRef)(null),E=(0,a.useRef)(!1),w=(0,a.useRef)(null),k=e=>{if(E.current||e===y.current)return;E.current=!0,y.current=e;const n=e.lastIndexOf("@");if(-1!==n){const a=n>0?e[n-1]:" ";if(0===n||/\s/.test(a)){const a=e.substring(n+1).split(/\s/)[0].trim();let l;if(""===a)l=i.slice(0,10);else{const e=a.toLowerCase();l=i.filter(t=>{const n=t.name.toLowerCase().includes(e),a=t.path.toLowerCase().includes(e);return n||a}).slice(0,10)}if(l.length>0){d(l),g(0),p(!0),t?.();const e=(()=>{const e=document.querySelector(".WACInputContainer");if(e){const t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width}}const t=document.querySelector("cds-aichat-react");if(t){const e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width}}const n=document.querySelector('.WAC__TextArea-textarea, textarea, input[type="text"]');if(n){const e=n.getBoundingClientRect();if(e.top>50&&e.left>0)return{top:e.top,left:e.left,width:e.width}}return{top:window.innerHeight-100,left:20,width:Math.min(600,window.innerWidth-40)}})(),n=Math.min(42*l.length+60,450);let a=e.top-n-8;a<0&&(a=e.top+60);const r={top:Math.max(10,a),left:Math.max(10,e.left+50)};f(r)}else p(!1)}else p(!1)}else p(!1);requestAnimationFrame(()=>{E.current=!1})},N=(0,a.useCallback)(t=>{const n=document.getElementById("main-input_field");if(!n)return;let a=n.value;const l=a.lastIndexOf("@");if(-1===l)return;const r=a.substring(l+1).split(/\s/)[0],o=a.substring(l+1+r.length),i=a.substring(0,l)+`./${t.path}`+o,s=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value")?.set;s?s.call(n,i):n.value=i;const c=new InputEvent("input",{bubbles:!0,composed:!0,inputType:"insertText",data:i});n.dispatchEvent(c),n.focus();const d=i.length;n.setSelectionRange(d,d),h.current=i,y.current=i,p(!1),e(t.path)},[e]);(0,a.useEffect)(()=>{if(o)return;C();const e=setInterval(C,15e3),t=()=>{const e=document.querySelector("cds-aichat-react"),n=document.getElementById("main-input_field");if(e||n){const t=e=>{const t=e.target||e.currentTarget,n=e=>"string"==typeof e&&(h.current=e,k(e),!0);if(n(t?.value))return;if(n(e.detail?.value))return;if("function"==typeof e.composedPath){const t=e.composedPath();for(const e of t){const t=e;if(t&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName||"true"===t.contentEditable)&&n(t.value||t.textContent))return}}const a=document.activeElement;if(a&&("TEXTAREA"===a.tagName||"INPUT"===a.tagName||"true"===a.contentEditable)&&n(a.value||a.textContent))return;const l=document.querySelector('.WAC__TextArea-textarea, textarea, input[type="text"], [contenteditable]');l&&n(l.value||l.textContent)};e&&(e.addEventListener("input",t),e.addEventListener("change",t),e.addEventListener("input-change",t),e.addEventListener("value-change",t)),setTimeout(()=>{document.querySelectorAll('.WAC__TextArea-textarea, textarea, input[type="text"], [contenteditable]').forEach(e=>{e.hasAttribute("data-autocomplete-listener")||(e.setAttribute("data-autocomplete-listener","true"),e.addEventListener("input",e=>{const t=e.target?.value||e.target?.textContent||"";h.current=t,k(t)}))})},1e3);const n=e=>{const t=e.target;if((!t||!t.hasAttribute("data-autocomplete-listener"))&&t&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName||"true"===t.contentEditable)){const e=t.value||t.textContent||"";h.current=e,k(e)}};return document.addEventListener("input",n,!0),()=>{e&&(e.removeEventListener("input",t),e.removeEventListener("change",t),e.removeEventListener("input-change",t),e.removeEventListener("value-change",t)),document.removeEventListener("input",n,!0)}}setTimeout(t,500)};return t(),()=>{clearInterval(e)}},[o]),(0,a.useEffect)(()=>{if(o)return;const e=e=>{m&&0!==c.length&&("ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),g(e=>(e+1)%c.length)):"ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),g(e=>(e-1+c.length)%c.length)):"Enter"===e.key||"Tab"===e.key?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),c[u]&&N(c[u])):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),p(!1)))};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[c,u,m,N,o]),(0,a.useEffect)(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[u]),(0,a.useEffect)(()=>{m&&c.length>0&&u>=0&&u<c.length?r?.(c[u].path):m||r?.(null)},[u,m,c,r]);const C=async()=>{try{const{workspaceService:e}=await n.e(9135).then(n.bind(n,39135)),t=await e.getWorkspaceTree(),a=S(t.tree||[]);s(a)}catch(e){x.current||_()}},_=()=>{x.current=!0,s([{name:"top_opportunities_arkansas.txt",path:"cuga_workspace/top_opportunities_arkansas.txt"},{name:"top_10_opportunities_arkansas.txt",path:"cuga_workspace/top_10_opportunities_arkansas.txt"},{name:"top_3_opportunities_arkansas.txt",path:"cuga_workspace/top_3_opportunities_arkansas.txt"},{name:"analysis_report.md",path:"cuga_workspace/analysis_report.md"},{name:"data_export.json",path:"cuga_workspace/data_export.json"}])},S=e=>{const t=[];for(const n of e)"file"===n.type?t.push({name:n.name,path:n.path}):n.children&&t.push(...S(n.children));return t};return a.createElement(a.Fragment,null,m&&c.length>0&&b&&a.createElement("div",{ref:v,className:"file-autocomplete",style:{top:`${b.top}px`,left:`${b.left}px`},"data-debug-position":JSON.stringify(b)},a.createElement("div",{className:"file-autocomplete-header"},a.createElement("span",null,"Workspace Files"),a.createElement("span",{className:"file-count"},c.length)),a.createElement("div",{className:"file-autocomplete-list"},c.map((e,t)=>a.createElement("div",{key:e.path,ref:t===u?w:null,className:"file-autocomplete-item "+(t===u?"selected":""),onClick:t=>{t.preventDefault(),N(e)},onMouseEnter:()=>{g(t),r?.(e.path)},onMouseLeave:()=>r?.(null)},a.createElement(l.iUU,{size:16,className:"file-icon"}),a.createElement("div",{className:"file-info"},a.createElement("span",{className:"file-name"},e.name),a.createElement("span",{className:"file-path"},"./",e.path))))),a.createElement("div",{className:"file-autocomplete-footer"},a.createElement("span",{className:"hint"},"↑↓ navigate • Enter/Tab select • Esc close"))))}},49397:function(e,t,n){n.d(t,{a:function(){return y}});var a=n(7378),l=n(67733),r=n.n(l),o=n(48034),i=n.n(o),s=n(62562),c=n.n(s),d=n(39805),m=n.n(d),p=n(57577),u=n.n(p),g=n(79062),b=n.n(g),f=n(26944),h={};h.styleTagTransform=b(),h.setAttributes=m(),h.insert=c().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=u();r()(f.A,h),f.A&&f.A.locals&&f.A.locals;function y({suggestions:e,onSuggestionClick:t}){return 0===e.length?null:a.createElement("div",{className:"followup-suggestions-container"},a.createElement("div",{className:"followup-suggestions-header"},a.createElement("span",{className:"followup-suggestions-title"},"Suggested followup questions:")),a.createElement("div",{className:"followup-suggestions-list"},e.map((e,n)=>a.createElement("button",{key:n,className:"followup-suggestion-chip",onClick:()=>t(e),type:"button"},e))))}},52068:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(7378),l=n(83281);n(33802);function r({onClose:e}){const[t,n]=(0,a.useState)({provider:"watsonx",model:"openai/gpt-oss-120b",temperature:.7,maxTokens:4096,topP:1}),[r,o]=(0,a.useState)("idle");(0,a.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await fetch("/api/config/model");if(e.ok){const t=await e.json();n(t)}}catch(e){}};return a.createElement("div",{className:"config-modal-overlay",onClick:e},a.createElement("div",{className:"config-modal",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"config-modal-header"},a.createElement("h2",null,"Model Configuration"),a.createElement("button",{className:"config-modal-close",onClick:e},a.createElement(l.X,{size:20}))),a.createElement("div",{className:"config-modal-content"},a.createElement("div",{className:"config-card"},a.createElement("h3",null,"Language Model Settings"),a.createElement("div",{className:"config-form"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Provider"),a.createElement("select",{value:t.provider,onChange:e=>n({...t,provider:e.target.value})},a.createElement("option",{value:"anthropic"},"Anthropic"),a.createElement("option",{value:"openai"},"OpenAI"),a.createElement("option",{value:"azure"},"Azure OpenAI"),a.createElement("option",{value:"watsonx"},"IBM watsonx"),a.createElement("option",{value:"ollama"},"Ollama"))),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Model"),a.createElement("input",{type:"text",value:t.model,onChange:e=>n({...t,model:e.target.value}),placeholder:"e.g., claude-3-5-sonnet-20241022"})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Temperature: ",t.temperature),a.createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.temperature,onChange:e=>n({...t,temperature:parseFloat(e.target.value)})}),a.createElement("small",null,"Controls randomness: 0 = focused, 2 = creative")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Max Tokens"),a.createElement("input",{type:"number",value:t.maxTokens,onChange:e=>n({...t,maxTokens:parseInt(e.target.value)}),min:"1",max:"200000"})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Top P: ",t.topP),a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:t.topP,onChange:e=>n({...t,topP:parseFloat(e.target.value)})}),a.createElement("small",null,"Nucleus sampling threshold")),"ollama"!==t.provider&&a.createElement("div",{className:"form-group"},a.createElement("label",null,"API Key"),a.createElement("input",{type:"password",value:t.apiKey||"",onChange:e=>n({...t,apiKey:e.target.value}),placeholder:"Enter API key..."}))))),a.createElement("div",{className:"config-modal-footer"},a.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),a.createElement("button",{className:`save-btn ${r}`,onClick:async()=>{o("saving");try{(await fetch("/api/config/model",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(o("success"),setTimeout(()=>o("idle"),2e3)):(o("error"),setTimeout(()=>o("idle"),2e3))}catch(e){o("error"),setTimeout(()=>o("idle"),2e3)}},disabled:"saving"===r},a.createElement(l.eMP,{size:16}),"idle"===r&&"Save Changes","saving"===r&&"Saving...","success"===r&&"Saved!","error"===r&&"Error!"))))}},57547:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(7378),l=n(83281);n(33802);function r({onClose:e}){const[t,n]=(0,a.useState)({sources:[],embeddingModel:"text-embedding-3-small",chunkSize:1e3,chunkOverlap:200}),[r,o]=(0,a.useState)("idle");(0,a.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await fetch("/api/config/knowledge");if(e.ok){const t=await e.json();n(t)}}catch(e){}},s=(e,a)=>{n({...t,sources:t.sources.map(t=>t.id===e?{...t,...a}:t)})};return a.createElement("div",{className:"config-modal-overlay",onClick:e},a.createElement("div",{className:"config-modal",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"config-modal-header"},a.createElement("h2",null,"Knowledge Configuration"),a.createElement("button",{className:"config-modal-close",onClick:e},a.createElement(l.X,{size:20}))),a.createElement("div",{className:"config-modal-content"},a.createElement("div",{className:"config-card"},a.createElement("h3",null,"Embedding Settings"),a.createElement("div",{className:"config-form"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Embedding Model"),a.createElement("select",{value:t.embeddingModel,onChange:e=>n({...t,embeddingModel:e.target.value})},a.createElement("option",{value:"text-embedding-3-small"},"text-embedding-3-small"),a.createElement("option",{value:"text-embedding-3-large"},"text-embedding-3-large"),a.createElement("option",{value:"text-embedding-ada-002"},"text-embedding-ada-002"))),a.createElement("div",{className:"form-row"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Chunk Size"),a.createElement("input",{type:"number",value:t.chunkSize,onChange:e=>n({...t,chunkSize:parseInt(e.target.value)}),min:"100",max:"4000"})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Chunk Overlap"),a.createElement("input",{type:"number",value:t.chunkOverlap,onChange:e=>n({...t,chunkOverlap:parseInt(e.target.value)}),min:"0",max:"1000"}))))),a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Knowledge Sources"),a.createElement("button",{className:"add-btn",onClick:()=>{const e={id:Date.now().toString(),name:"New Source",type:"file",enabled:!0};n({...t,sources:[...t.sources,e]})}},a.createElement(l.FWt,{size:16}),"Add Source")),a.createElement("div",{className:"sources-list"},t.sources.map(e=>a.createElement("div",{key:e.id,className:"source-item"},a.createElement("div",{className:"source-header"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>s(e.id,{enabled:t.target.checked})}),a.createElement("input",{type:"text",value:e.name,onChange:t=>s(e.id,{name:t.target.value}),className:"source-name"}),a.createElement("select",{value:e.type,onChange:t=>s(e.id,{type:t.target.value})},a.createElement("option",{value:"file"},"File"),a.createElement("option",{value:"url"},"URL"),a.createElement("option",{value:"database"},"Database")),a.createElement("button",{className:"delete-btn",onClick:()=>{return a=e.id,void n({...t,sources:t.sources.filter(e=>e.id!==a)});var a}},a.createElement(l.TBR,{size:16}))),a.createElement("div",{className:"source-details"},"file"===e.type&&a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",value:e.path||"",onChange:t=>s(e.id,{path:t.target.value}),placeholder:"File path..."})),"url"===e.type&&a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",value:e.url||"",onChange:t=>s(e.id,{url:t.target.value}),placeholder:"https://..."})))))),0===t.sources.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No knowledge sources configured. Click "Add Source" to get started.')))),a.createElement("div",{className:"config-modal-footer"},a.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),a.createElement("button",{className:`save-btn ${r}`,onClick:async()=>{o("saving");try{(await fetch("/api/config/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(o("success"),setTimeout(()=>o("idle"),2e3)):(o("error"),setTimeout(()=>o("idle"),2e3))}catch(e){o("error"),setTimeout(()=>o("idle"),2e3)}},disabled:"saving"===r},a.createElement(l.eMP,{size:16}),"idle"===r&&"Save Changes","saving"===r&&"Saving...","success"===r&&"Saved!","error"===r&&"Error!"))))}},67813:function(e,t,n){n.d(t,{J:function(){return x}});var a=n(7378),l=n(83281),r=n(67733),o=n.n(r),i=n(48034),s=n.n(i),c=n(62562),d=n.n(c),m=n(39805),p=n.n(m),u=n(57577),g=n.n(u),b=n(79062),f=n.n(b),h=n(90313),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();o()(h.A,y),h.A&&h.A.locals&&h.A.locals;function x({steps:e,isActive:t,onComplete:n,onSkip:r}){const[o,i]=(0,a.useState)(0),[s,c]=(0,a.useState)({top:0,left:0}),[d,m]=(0,a.useState)({top:0,left:0,width:0,height:0}),p=(0,a.useCallback)(()=>{if(!t||o>=e.length)return;const n=e[o],a=n.target.split(",").map(e=>e.trim());let l=null;for(const e of a)if(l=document.querySelector(e),l)break;if(!l)return;const r=l.getBoundingClientRect(),i=n.highlightPadding||8;m({top:r.top-i,left:r.left-i,width:r.width+2*i,height:r.height+2*i});const s=320,d=200,p=16;let u=0,g=0;switch(n.placement||"bottom"){case"top":u=r.top-d-p,g=r.left+r.width/2-160;break;case"bottom":u=r.bottom+p,g=r.left+r.width/2-160;break;case"left":u=r.top+r.height/2-100,g=r.left-s-p;break;case"right":u=r.top+r.height/2-100,g=r.right+p}const b=window.innerWidth,f=window.innerHeight;g<p&&(g=p),g+s>b-p&&(g=b-s-p),u<p&&(u=p),u+d>f-p&&(u=f-d-p),c({top:u,left:g}),l.scrollIntoView({behavior:"smooth",block:"center"})},[t,o,e]);(0,a.useEffect)(()=>{if(t){p();const t=e[o];t?.beforeShow&&t.beforeShow();const n=()=>p();window.addEventListener("resize",n);const a=setTimeout(p,100);return()=>{window.removeEventListener("resize",n),clearTimeout(a)}}},[t,o,p,e]),(0,a.useEffect)(()=>{const n=e[o];n?.afterShow&&t&&n.afterShow()},[o,t,e]);const u=()=>{n(),i(0)},g=()=>{r(),i(0)};if(!t||o>=e.length)return null;const b=e[o],f=(o+1)/e.length*100;return a.createElement(a.Fragment,null,a.createElement("div",{className:"tour-overlay"}),a.createElement("div",{className:"tour-highlight",style:{top:`${d.top}px`,left:`${d.left}px`,width:`${d.width}px`,height:`${d.height}px`}}),a.createElement("div",{className:"tour-tooltip",style:{top:`${s.top}px`,left:`${s.left}px`}},a.createElement("div",{className:"tour-tooltip-header"},a.createElement("div",{className:"tour-step-counter"},"Step ",o+1," of ",e.length),a.createElement("button",{className:"tour-close-btn",onClick:g,title:"Skip tour"},a.createElement(l.X,{size:16}))),a.createElement("div",{className:"tour-tooltip-content"},a.createElement("h3",{className:"tour-tooltip-title"},b.title),a.createElement("p",{className:"tour-tooltip-text"},b.content)),a.createElement("div",{className:"tour-tooltip-footer"},a.createElement("div",{className:"tour-progress-bar"},a.createElement("div",{className:"tour-progress-fill",style:{width:`${f}%`}})),a.createElement("div",{className:"tour-tooltip-actions"},a.createElement("button",{className:"tour-btn tour-btn-secondary",onClick:g},"Skip Tour"),a.createElement("div",{className:"tour-navigation"},a.createElement("button",{className:"tour-btn tour-btn-icon",onClick:()=>{o>0&&i(o-1)},disabled:0===o,title:"Previous"},a.createElement(l.JGc,{size:16})),a.createElement("button",{className:"tour-btn tour-btn-primary",onClick:()=>{o<e.length-1?i(o+1):u()}},o===e.length-1?a.createElement(a.Fragment,null,a.createElement(l.Jlk,{size:16}),"Finish"):a.createElement(a.Fragment,null,"Next",a.createElement(l.c_$,{size:16}))))))))}},70944:function(e,t,n){n.d(t,{E:function(){return w}});var a=n(7378),l=n(83281),r=n(67733),o=n.n(r),i=n(48034),s=n.n(i),c=n(62562),d=n.n(c),m=n(39805),p=n.n(m),u=n(57577),g=n.n(u),b=n(79062),f=n.n(b),h=n(82066),y={};y.styleTagTransform=f(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();o()(h.A,y),h.A&&h.A.locals&&h.A.locals;var x=n(10534);const v=!1,E=!1;function w({globalVariables:e,variablesHistory:t,selectedAnswerId:n,onSelectAnswer:r,isCollapsed:o=!1,activeTab:i="conversations",onTabChange:s,leftSidebarRef:c}){const[d,m]=(0,a.useState)(!o);(0,a.useEffect)(()=>{m(!o)},[o]),(0,a.useEffect)(()=>{},[e,t]);const[p,u]=(0,a.useState)([]),[g,b]=(0,a.useState)(null),[f,h]=(0,a.useState)([]),[y,w]=(0,a.useState)(null),[k,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{C(),A()},[]);const C=async()=>{try{const e=await fetch("/api/conversations");if(e.ok){const t=await e.json();u(t)}}catch(e){}},_=async e=>{const t={id:`conv-${Date.now()}`,title:e||"New Conversation",timestamp:Date.now()};u(e=>[t,...e]),b(t.id);try{const n=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e||"New Conversation",timestamp:Date.now()})});if(n.ok){const e=await n.json();u(n=>n.map(n=>n.id===t.id?{...e,id:t.id}:n))}}catch(e){}},S=a.useCallback(e=>{_(e)},[]);a.useImperativeHandle(c,()=>({addConversation:S}),[S]),a.useEffect(()=>{},[c?.current]);const A=async()=>{try{const e=await fetch("/api/flows");if(e.ok){const t=await e.json();h(t.flows||[])}else h([])}catch(e){h([])}},z=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/6e4),l=Math.floor(n/36e5),r=Math.floor(n/864e5);return a<1?"1 minute ago":a<60?`${a} ${1===a?"minute":"minutes"} ago`:l<24?`${l} ${1===l?"hour":"hours"} ago`:1===r?"now":r<7?`${r} days ago`:t.toLocaleDateString()};return d?a.createElement("div",{className:"left-sidebar "+(d?"expanded":"collapsed")},a.createElement("div",{className:"left-sidebar-header"},a.createElement("div",{className:"left-sidebar-tabs"},v&&a.createElement("button",{className:"sidebar-tab "+("conversations"===i?"active":""),onClick:()=>s?s("conversations"):null},a.createElement(l.vEG,{size:16}),a.createElement("span",null,"Chats")),a.createElement("button",{className:"sidebar-tab "+("variables"===i?"active":""),onClick:()=>s?s("variables"):null},a.createElement(l.WmV,{size:16}),a.createElement("span",null,"Variables"),a.createElement("div",{className:"sidebar-tab-info-tooltip-wrapper",onClick:e=>e.stopPropagation(),onMouseEnter:e=>e.stopPropagation()},a.createElement(l.mNh,{size:14,className:"sidebar-info-icon"}),a.createElement("div",{className:"sidebar-tab-info-tooltip"},"Variables are the results from task execution. Ask any question about the variables and CUGA will respond."))),E&&a.createElement("button",{className:"sidebar-tab "+("savedflows"===i?"active":""),onClick:()=>s?s("savedflows"):null},a.createElement(l.WuS,{size:16}),a.createElement("span",null,"Saved Flows"))),a.createElement("button",{className:"left-sidebar-toggle",onClick:()=>m(!1)},a.createElement(l.JGc,{size:18}))),a.createElement("div",{className:"left-sidebar-content"},v&&"conversations"===i?a.createElement(a.Fragment,null,a.createElement("div",{className:"conversations-actions"},a.createElement("button",{className:"new-conversation-btn",onClick:()=>_()},a.createElement(l.FWt,{size:16}),a.createElement("span",null,"New Chat"))),a.createElement("div",{className:"conversations-list"},0===p.length?a.createElement("div",{className:"empty-state"},a.createElement(l.vEG,{size:32}),a.createElement("p",null,"No conversations yet"),a.createElement("small",null,"Start a new chat to begin")):p.map(e=>a.createElement("div",{key:e.id,className:"conversation-item "+(g===e.id?"selected":""),onClick:()=>b(e.id)},a.createElement("div",{className:"conversation-header"},a.createElement(l.vEG,{size:14}),a.createElement("span",{className:"conversation-title"},e.title),a.createElement("button",{className:"delete-conversation-btn",onClick:t=>(async(e,t)=>{t.stopPropagation();try{(await fetch(`/api/conversations/${e}`,{method:"DELETE"})).ok&&(u(p.filter(t=>t.id!==e)),g===e&&b(null))}catch(e){}})(e.id,t)},a.createElement(l.TBR,{size:14}))),e.preview&&a.createElement("div",{className:"conversation-preview"},e.preview),a.createElement("div",{className:"conversation-date"},z(e.timestamp)))))):"variables"===i?a.createElement("div",{className:"variables-wrapper"},a.createElement(x.A,{variables:e,history:t,selectedAnswerId:n,onSelectAnswer:r})):E&&"savedflows"===i?a.createElement(a.Fragment,null,a.createElement("div",{className:"conversations-list"},0===f.length?a.createElement("div",{className:"empty-state"},a.createElement(l.WuS,{size:32}),a.createElement("p",null,"No saved flows yet"),a.createElement("small",null,"Saved flows will appear here")):f.map(e=>a.createElement("div",{key:e.id,className:"conversation-item flow-item"},a.createElement("div",{className:"conversation-header"},a.createElement(l.WuS,{size:14}),a.createElement("span",{className:"conversation-title"},e.name),a.createElement("div",{className:"flow-info-icon-wrapper",onMouseEnter:t=>{const n=t.currentTarget.getBoundingClientRect(),a=window.innerWidth;let l=n.right+12;l+300>a&&(l=n.left-300-12);let r=n.top;r+120>window.innerHeight&&(r=window.innerHeight-120-10),r<10&&(r=10),N({top:r,left:l}),w(e.id)},onMouseLeave:e=>{const t=document.querySelector(".flow-info-tooltip");if(t){const n=t.getBoundingClientRect(),a=e.clientX,l=e.clientY;if(a>=n.left&&a<=n.right&&l>=n.top&&l<=n.bottom)return}w(null),N(null)}},a.createElement(l.R2D,{size:14,className:"flow-info-icon"}))),e.description&&a.createElement("div",{className:"conversation-preview"},e.description),a.createElement("div",{className:"flow-parameters"},a.createElement("div",{className:"flow-function-signature"},a.createElement("code",null,e.name,"("),a.createElement("div",{className:"flow-params-list"},e.parameters.map((t,n)=>a.createElement("div",{key:n,className:"flow-param"},a.createElement("code",{className:"param-name"},t.name),a.createElement("span",{className:"param-type"},": ",t.type),!t.required&&void 0!==t.default&&a.createElement("span",{className:"param-default"}," = ",JSON.stringify(t.default)),t.required&&a.createElement("span",{className:"param-required"},"*"),n<e.parameters.length-1&&a.createElement("span",null,",")))),a.createElement("code",null,")"))),a.createElement("div",{className:"conversation-date"},z(e.timestamp)))))):null),y&&k&&a.createElement("div",{className:"flow-info-tooltip",style:{top:`${k.top}px`,left:`${k.left}px`},onMouseEnter:()=>{w(y)},onMouseLeave:()=>{w(null),N(null)}},"Saved from a previous conversation where you completed a similar task using CRM, filesystem, and email tools. Reuse this flow to repeat the same pattern with different parameters.")):a.createElement("div",{className:"left-sidebar-floating-toggle",onClick:()=>m(!0)},a.createElement(l.c_$,{size:20}),a.createElement("div",{className:"sidebar-floating-count"},p.length))}},82066:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,".left-sidebar {\n  position: fixed;\n  left: 0;\n  top: 48px;\n  bottom: 0;\n  background: white;\n  border-right: 1px solid #e5e7eb;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s ease;\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);\n  width: 320px;\n  transform: translateX(0);\n  overflow: visible;\n}\n\n.left-sidebar.collapsed {\n  transform: translateX(-100%);\n  box-shadow: none;\n}\n\n.left-sidebar.expanded {\n  transform: translateX(0);\n  animation: slideInFromLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes slideInFromLeft {\n  from {\n    transform: translateX(-100%);\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n\n.left-sidebar-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n  border-bottom: 1px solid #e5e7eb;\n  gap: 6px;\n  background: #f9fafb;\n  min-height: 52px;\n}\n\n.left-sidebar-tabs {\n  display: flex;\n  gap: 3px;\n  flex: 1;\n  min-width: 0;\n  background: white;\n  border-radius: 8px;\n  padding: 3px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n}\n\n.sidebar-tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 6px 6px;\n  background: transparent;\n  border: none;\n  border-radius: 6px;\n  color: #64748b;\n  font-size: 10.5px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n  min-width: 0;\n}\n\n.sidebar-tab span {\n  white-space: nowrap;\n}\n\n.sidebar-tab:hover {\n  background: #f8fafc;\n  color: #4e00ec;\n}\n\n.sidebar-tab.active {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);\n}\n\n.sidebar-tab-info-tooltip-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin-left: 4px;\n  cursor: help;\n}\n\n.sidebar-info-icon {\n  color: #94a3b8;\n  cursor: help;\n  transition: color 0.2s ease;\n  flex-shrink: 0;\n  pointer-events: auto;\n}\n\n.sidebar-tab:hover .sidebar-info-icon {\n  color: #4e00ec;\n}\n\n.sidebar-tab.active .sidebar-info-icon {\n  color: white;\n}\n\n.sidebar-tab-info-tooltip-wrapper:hover .sidebar-info-icon {\n  color: #4e00ec !important;\n}\n\n.sidebar-tab.active .sidebar-tab-info-tooltip-wrapper:hover .sidebar-info-icon {\n  color: #e0e7ff !important;\n}\n\n.sidebar-tab-info-tooltip {\n  position: fixed;\n  top: 60px;\n  left: 20px;\n  width: 320px;\n  max-width: calc(100vw - 40px);\n  padding: 14px 16px;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  border: 2px solid #e0e7ff;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.25), 0 4px 12px rgba(0, 0, 0, 0.15);\n  font-size: 13px;\n  line-height: 1.6;\n  color: #334155;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n  z-index: 9999;\n  pointer-events: none;\n  transform-origin: top left;\n  font-weight: 500;\n  white-space: normal;\n  word-wrap: break-word;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  hyphens: auto;\n}\n\n.sidebar-tab-info-tooltip code {\n  background: #e0e7ff;\n  color: #4f46e5;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;\n  font-size: 12px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n\n.sidebar-tab-info-tooltip-wrapper:hover .sidebar-tab-info-tooltip {\n  opacity: 1;\n  visibility: visible;\n  pointer-events: auto;\n  transform: translateY(2px);\n}\n\n.left-sidebar-toggle {\n  width: 32px;\n  min-width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  cursor: pointer;\n  color: #64748b;\n  transition: all 0.2s;\n  flex-shrink: 0;\n}\n\n.left-sidebar-toggle:hover {\n  background: #f8fafc;\n  border-color: #cbd5e1;\n  color: #4e00ec;\n}\n\n.left-sidebar-content {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: visible;\n  display: flex;\n  flex-direction: column;\n}\n\n.conversations-actions {\n  padding: 12px;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n.new-conversation-btn {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 10px 16px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  box-shadow: 0 2px 4px rgba(102, 126, 234, 0.2);\n}\n\n.new-conversation-btn:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);\n}\n\n.new-conversation-btn:active {\n  transform: translateY(0);\n}\n\n.conversations-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px;\n  flex: 1;\n  overflow: visible;\n}\n\n.conversation-item {\n  background: #f8fafc;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n  position: relative;\n  overflow: visible;\n}\n\n.conversation-item:hover {\n  background: #f1f5f9;\n  border-color: #cbd5e1;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);\n}\n\n.conversation-item.selected {\n  background: #eef2ff;\n  border-color: #667eea;\n  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);\n}\n\n.conversation-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 6px;\n  position: relative;\n  overflow: visible;\n}\n\n.conversation-header svg {\n  color: #667eea;\n  flex-shrink: 0;\n}\n\n.conversation-title {\n  font-size: 13px;\n  font-weight: 600;\n  color: #1e293b;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.delete-conversation-btn {\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  transition: all 0.2s;\n  opacity: 0;\n}\n\n.conversation-item:hover .delete-conversation-btn {\n  opacity: 1;\n}\n\n.delete-conversation-btn:hover {\n  background: #fee2e2;\n  color: #ef4444;\n}\n\n.conversation-preview {\n  font-size: 12px;\n  color: #64748b;\n  line-height: 1.4;\n  margin-bottom: 6px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.conversation-date {\n  font-size: 11px;\n  color: #94a3b8;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  text-align: center;\n  color: #94a3b8;\n  gap: 8px;\n}\n\n.empty-state svg {\n  opacity: 0.5;\n}\n\n.empty-state p {\n  margin: 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #64748b;\n}\n\n.empty-state small {\n  font-size: 12px;\n}\n\n.variables-wrapper {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n.variables-wrapper .variables-sidebar {\n  position: relative !important;\n  left: 0 !important;\n  top: 0 !important;\n  height: 100%;\n  width: 100%;\n  border-right: none;\n  box-shadow: none;\n  transform: none !important;\n}\n\n.variables-wrapper .variables-sidebar-floating-toggle {\n  display: none;\n}\n\n.left-sidebar-floating-toggle {\n  position: fixed;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 48px;\n  height: 64px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-left: none;\n  border-radius: 0 8px 8px 0;\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  z-index: 999;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: #64748b;\n  animation: slideInToggle 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.left-sidebar-floating-toggle:hover {\n  background: #f8fafc;\n  color: #4e00ec;\n  box-shadow: 2px 0 12px rgba(102, 126, 234, 0.2);\n  transform: translateY(-50%) translateX(4px);\n}\n\n@keyframes slideInToggle {\n  from {\n    transform: translateY(-50%) translateX(-100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(-50%) translateX(0);\n    opacity: 1;\n  }\n}\n\n.sidebar-floating-count {\n  font-size: 11px;\n  font-weight: 600;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.left-sidebar-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.left-sidebar-content::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.left-sidebar-content::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.left-sidebar-content::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n@media (max-width: 768px) {\n  .left-sidebar {\n    width: 280px;\n  }\n}\n\n@media (max-width: 640px) {\n  .left-sidebar {\n    width: 100%;\n    max-width: 300px;\n  }\n}\n\n.flow-item {\n  cursor: default;\n}\n\n.flow-parameters {\n  margin: 8px 0;\n  padding: 8px;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #e5e7eb;\n}\n\n.flow-function-signature {\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n  color: #1e293b;\n  line-height: 1.6;\n}\n\n.flow-function-signature code {\n  background: transparent;\n  padding: 0;\n  color: inherit;\n  font-family: inherit;\n}\n\n.flow-params-list {\n  margin-left: 12px;\n  margin-top: 4px;\n}\n\n.flow-param {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  margin-bottom: 2px;\n}\n\n.param-name {\n  color: #667eea;\n  font-weight: 600;\n}\n\n.param-type {\n  color: #64748b;\n  font-style: italic;\n}\n\n.param-default {\n  color: #10b981;\n}\n\n.param-required {\n  color: #ef4444;\n  font-weight: 600;\n  margin-left: 2px;\n}\n\n.flow-info-icon-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n}\n\n.flow-info-icon {\n  color: #94a3b8;\n  cursor: pointer;\n  transition: all 0.2s;\n  flex-shrink: 0;\n}\n\n.flow-info-icon:hover {\n  color: #667eea;\n  transform: scale(1.1);\n}\n\n.flow-info-tooltip {\n  position: fixed;\n  width: 300px;\n  background: #1e293b;\n  color: white;\n  padding: 14px 16px;\n  border-radius: 8px;\n  font-size: 12px;\n  line-height: 1.5;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);\n  z-index: 99999;\n  animation: tooltipFadeIn 0.2s ease;\n  pointer-events: auto;\n}\n\n.flow-info-tooltip::before {\n  content: '';\n  position: absolute;\n  right: 100%;\n  top: 20px;\n  border: 8px solid transparent;\n  border-right-color: #1e293b;\n}\n\n@keyframes tooltipFadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(4px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n\n",""]),t.A=o},83533:function(e,t,n){n.d(t,{A:function(){return i}});var a=n(7378),l=n(83281);n(33802);function r({items:e,selectedValues:t,onChange:n,placeholder:r,disabled:o,allowWildcard:i}){const[s,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(""),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{function e(e){p.current&&!p.current.contains(e.target)&&c(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const u=e.filter(e=>e.label.toLowerCase().includes(d.toLowerCase())||e.description?.toLowerCase().includes(d.toLowerCase())),g=t.includes("*"),b=e=>{if("*"===e)n(g?[]:["*"]);else if(g)n([e]);else{const a=t.includes(e)?t.filter(t=>t!==e):[...t,e];n(a)}},f=g?"All (*)":0===t.length?r||"Select...":`${t.length} selected`;return a.createElement("div",{ref:p,style:{position:"relative",width:"100%"}},a.createElement("div",{onClick:()=>!o&&c(!s),style:{padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:o?"not-allowed":"pointer",backgroundColor:o?"#f9fafb":"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"}},a.createElement("span",{style:{color:0===t.length?"#9ca3af":"#111827"}},f),a.createElement(l.yQN,{size:16,style:{transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"}})),s&&a.createElement("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",maxHeight:"300px",overflow:"hidden",zIndex:1e3,display:"flex",flexDirection:"column"}},a.createElement("div",{style:{padding:"8px",borderBottom:"1px solid #e5e7eb"}},a.createElement("div",{style:{position:"relative"}},a.createElement(l.vji,{size:16,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),a.createElement("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Search...",style:{width:"100%",padding:"6px 6px 6px 32px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"13px"},onClick:e=>e.stopPropagation()}))),a.createElement("div",{style:{overflowY:"auto",maxHeight:"240px"}},i&&a.createElement("div",{onClick:()=>b("*"),style:{padding:"8px 12px",cursor:"pointer",backgroundColor:g?"#eff6ff":"transparent",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"8px"}},a.createElement("input",{type:"checkbox",checked:g,readOnly:!0,style:{cursor:"pointer"}}),a.createElement("div",null,a.createElement("div",{style:{fontWeight:600,fontSize:"13px"}},"All (*)"),a.createElement("div",{style:{fontSize:"12px",color:"#6b7280"}},"Select all items"))),u.map(e=>a.createElement("div",{key:e.value,onClick:()=>b(e.value),style:{padding:"8px 12px",cursor:"pointer",backgroundColor:t.includes(e.value)?"#eff6ff":"transparent",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"8px"}},a.createElement("input",{type:"checkbox",checked:t.includes(e.value),readOnly:!0,style:{cursor:"pointer"}}),a.createElement("div",{style:{flex:1}},a.createElement("div",{style:{fontWeight:500,fontSize:"13px"}},e.label),e.description&&a.createElement("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"}},e.description)))),0===u.length&&a.createElement("div",{style:{padding:"16px",textAlign:"center",color:"#9ca3af",fontSize:"13px"}},"No items found"))))}function o({values:e,onChange:t,placeholder:n,disabled:l}){const[r,o]=(0,a.useState)(""),i=(0,a.useRef)(null),s=n=>{const a=n.trim();a&&!e.includes(a)&&t([...e,a]),o("")},c=n=>{t(e.filter((e,t)=>t!==n))};return a.createElement("div",{onClick:()=>!l&&i.current?.focus(),style:{border:"1px solid #e5e7eb",borderRadius:"6px",padding:"6px",minHeight:"42px",display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center",cursor:l?"not-allowed":"text",backgroundColor:l?"#f9fafb":"#fff"}},e.map((e,t)=>a.createElement("div",{key:t,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#eff6ff",border:"1px solid #dbeafe",borderRadius:"4px",fontSize:"13px",color:"#1e40af"}},a.createElement("span",null,e),!l&&a.createElement("button",{onClick:e=>{e.stopPropagation(),c(t)},style:{background:"none",border:"none",cursor:"pointer",padding:"0",display:"flex",alignItems:"center",color:"#3b82f6",fontSize:"16px",lineHeight:"1"},title:"Remove"},"×"))),a.createElement("input",{ref:i,type:"text",value:r,onChange:e=>o(e.target.value),onKeyDown:t=>{"Enter"===t.key||","===t.key?(t.preventDefault(),s(r)):"Backspace"===t.key&&!r&&e.length>0&&c(e.length-1)},onBlur:()=>{r.trim()&&s(r)},placeholder:0===e.length?n:"",disabled:l,style:{border:"none",outline:"none",flex:1,minWidth:"120px",padding:"4px",fontSize:"13px",backgroundColor:"transparent"}}))}function i({onClose:e}){const[t,n]=(0,a.useState)({enablePolicies:!0,policies:[]}),[i,s]=(0,a.useState)("intent_guard"),[c,d]=(0,a.useState)(null),[m,p]=(0,a.useState)("idle"),[u,g]=(0,a.useState)(!0),[b,f]=(0,a.useState)([]),[h,y]=(0,a.useState)([]),[x,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{E(),w()},[]);const E=async()=>{g(!0);try{const e=await fetch("/api/config/policies");if(e.ok){const t=await e.json(),a=(t.policies??[]).map(e=>({...e,triggers:e.triggers.map(e=>{if("natural_language"===e.type&&void 0!==e.value){const t=Array.isArray(e.value)?e.value:"string"==typeof e.value?[e.value]:[];return{...e,value:t}}return e})}));n({enablePolicies:t.enablePolicies??!0,policies:a})}else{await e.text()}}catch(e){}finally{g(!1)}},w=async()=>{v(!0);try{const e=await fetch("/api/tools/list");if(e.ok){const t=await e.json();f(t.tools||[]),y(t.apps||[])}}catch(e){}finally{v(!1)}},k=()=>{const e={id:`guard_${Date.now()}`,name:"New Intent Guard",description:"Blocks or modifies specific user intents",policy_type:"intent_guard",enabled:!0,triggers:[{type:"keyword",value:[],target:"intent",case_sensitive:!1,operator:"and"}],response:{response_type:"natural_language",content:"This action is not allowed."},allow_override:!1,priority:50};n({...t,policies:[...t.policies,e]})},N=()=>{const e={id:`playbook_${Date.now()}`,name:"New Playbook",description:"Step-by-step guidance for a task",policy_type:"playbook",enabled:!0,triggers:[{type:"keyword",value:[],target:"intent",case_sensitive:!1,operator:"and"}],markdown_content:"# Task Guide\n\n## Steps:\n\n1. First step\n2. Second step\n3. Third step",steps:[{step_number:1,instruction:"First step",expected_outcome:"Step 1 complete",tools_allowed:[]}],priority:50};n({...t,policies:[...t.policies,e]})},C=()=>{const e={id:`tool_guide_${Date.now()}`,name:"New Tool Guide",description:"Add additional context to tool descriptions",policy_type:"tool_guide",enabled:!0,triggers:[{type:"always"}],target_tools:["*"],target_apps:void 0,guide_content:"## Additional Guidelines\n\n- Follow best practices\n- Consider security implications",prepend:!1,priority:50};n({...t,policies:[...t.policies,e]})},_=()=>{const e={id:`tool_approval_${Date.now()}`,name:"New Tool Approval",description:"Require approval before executing specific tools",policy_type:"tool_approval",enabled:!0,triggers:[],required_tools:[],required_apps:void 0,approval_message:"This tool requires your approval before execution.",show_code_preview:!0,auto_approve_after:void 0,priority:50};n({...t,policies:[...t.policies,e]})},S=()=>{const e={id:`output_formatter_${Date.now()}`,name:"New Output Formatter",description:"Format the final AI message output",policy_type:"output_formatter",enabled:!0,triggers:[{type:"keyword",value:[],target:"agent_response",case_sensitive:!1,operator:"and"}],format_type:"markdown",format_config:"Format the response in a clear, structured way with proper headings and bullet points.",priority:50};n({...t,policies:[...t.policies,e]})},A=(e,a)=>{n({...t,policies:t.policies.map(t=>t.id===e?{...t,...a}:t)})},z=e=>{n({...t,policies:t.policies.filter(t=>t.id!==e)})},T=t.policies.filter(e=>"intent_guard"===e.policy_type),P=t.policies.filter(e=>"playbook"===e.policy_type),M=t.policies.filter(e=>"tool_guide"===e.policy_type),I=t.policies.filter(e=>"tool_approval"===e.policy_type),R=t.policies.filter(e=>"output_formatter"===e.policy_type);return a.createElement("div",{className:"config-modal-overlay"},a.createElement("div",{className:"config-modal"},a.createElement("div",{className:"config-modal-header"},a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},a.createElement(l.ekZ,{size:24,style:{color:"#4e00ec"}}),a.createElement("h2",null,"Policies Configuration")),a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},a.createElement("button",{onClick:()=>{try{const e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`policies-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}catch(e){alert("Failed to export policies. Check console for details.")}},disabled:0===t.policies.length,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:0===t.policies.length?"#e5e7eb":"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:0===t.policies.length?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,color:0===t.policies.length?"#9ca3af":"#374151"},title:"Export all policies as JSON"},a.createElement(l.f5X,{size:16}),"Export"),a.createElement("label",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"#374151"},title:"Import policies from JSON"},a.createElement(l._OO,{size:16}),"Import",a.createElement("input",{type:"file",accept:".json",onChange:e=>{const a=e.target.files?.[0];if(!a)return;const l=new FileReader;l.onload=e=>{try{const a=JSON.parse(e.target?.result);if(a.policies&&Array.isArray(a.policies)){const e=a.policies.map(e=>({...e,triggers:e.triggers.map(e=>{if("natural_language"===e.type&&void 0!==e.value){const t=Array.isArray(e.value)?e.value:"string"==typeof e.value?[e.value]:[];return{...e,value:t}}return e})}));n({enablePolicies:a.enablePolicies??t.enablePolicies,policies:e}),alert(`Successfully imported ${e.length} policies!`)}else alert('Invalid policies file format. Expected a JSON file with a "policies" array.')}catch(e){alert("Failed to import policies. Please check the file format.")}},l.readAsText(a),e.target.value=""},style:{display:"none"}})),a.createElement("button",{className:"config-modal-close",onClick:e},a.createElement(l.X,{size:20})))),a.createElement("div",{className:"config-modal-tabs"},a.createElement("button",{className:"config-tab "+("intent_guard"===i?"active":""),onClick:()=>s("intent_guard")},"Intent Guards (",T.length,")"),a.createElement("button",{className:"config-tab "+("playbook"===i?"active":""),onClick:()=>s("playbook")},"Playbooks (",P.length,")"),a.createElement("button",{className:"config-tab "+("tool_guide"===i?"active":""),onClick:()=>s("tool_guide")},"Tool Guide (",M.length,")"),a.createElement("button",{className:"config-tab "+("tool_approval"===i?"active":""),onClick:()=>s("tool_approval")},"Tool Approval (",I.length,")"),a.createElement("button",{className:"config-tab "+("output_formatter"===i?"active":""),onClick:()=>s("output_formatter")},"Output Formatter (",R.length,")")),a.createElement("div",{className:"config-modal-content"},u?a.createElement("div",{className:"config-card",style:{textAlign:"center",padding:"40px"}},a.createElement("p",null,"Loading policies...")):a.createElement(a.Fragment,null,a.createElement("div",{className:"config-card"},a.createElement("h3",null,"Global Settings"),a.createElement("div",{className:"config-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:t.enablePolicies,onChange:e=>n({...t,enablePolicies:e.target.checked})}),a.createElement("span",null,"Enable Policy System")),a.createElement("small",null,"Master switch for all policy enforcement (",t.policies.length," policies configured)")))),"intent_guard"===i&&a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Intent Guards"),a.createElement("button",{className:"add-btn",onClick:k,disabled:!t.enablePolicies},a.createElement(l.FWt,{size:16}),"Add Intent Guard")),a.createElement("div",{className:"sources-list"},T.map(e=>{const n=c===e.id,r=e.triggers.find(e=>"keyword"===e.type),i=r&&Array.isArray(r.value)?r.value:[];return a.createElement("div",{key:e.id,className:"agent-config-card"},a.createElement("div",{className:"agent-config-header"},a.createElement("div",{className:"agent-config-top"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>A(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("input",{type:"text",value:e.name,onChange:t=>A(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),a.createElement("button",{className:"expand-btn",onClick:()=>d(n?null:e.id)},n?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),a.createElement("button",{className:"delete-btn",onClick:()=>z(e.id),disabled:!t.enablePolicies},a.createElement(l.TBR,{size:16}))),!n&&a.createElement("div",{className:"agent-summary"},i.length>0&&a.createElement("span",{className:"agent-summary-item"},i.length," keyword",1!==i.length?"s":""),e.triggers.some(e=>"natural_language"===e.type)&&a.createElement("span",{className:"agent-summary-item"},"AI trigger"),a.createElement("span",{className:"agent-summary-item"},"Priority: ",e.priority))),n&&a.createElement("div",{className:"agent-config-details"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Description"),a.createElement("textarea",{value:e.description,onChange:t=>A(e.id,{description:t.target.value}),placeholder:"What this policy does...",rows:2,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Trigger Keywords (Optional)"),a.createElement(o,{values:i,onChange:t=>{const n=e.triggers.filter(e=>"keyword"!==e.type);if(t.length>0){const a=e.triggers.find(e=>"keyword"===e.type);n.push({type:"keyword",value:t,target:"intent",case_sensitive:!1,operator:a?.operator||"and"})}A(e.id,{triggers:n})},placeholder:"Type keyword and press Enter or comma",disabled:!t.enablePolicies}),a.createElement("small",null,"Type keywords and press Enter or comma to add. Click × to remove.")),i.length>1&&a.createElement("div",{className:"form-group"},a.createElement("label",null,"Keyword Matching"),a.createElement("select",{value:r?.operator||"and",onChange:t=>{const n=t.target.value,a=e.triggers.map(e=>"keyword"===e.type?{...e,operator:n}:e);A(e.id,{triggers:a})},disabled:!t.enablePolicies},a.createElement("option",{value:"and"},"Match ALL keywords (AND)"),a.createElement("option",{value:"or"},"Match ANY keyword (OR)")),a.createElement("small",null,"Choose whether all keywords or any keyword should trigger this policy")),(()=>{const n=e.triggers.find(e=>"natural_language"===e.type),l=n?Array.isArray(n.value)?n.value:n.value?[n.value]:[]:[];return a.createElement("div",{className:"form-group"},a.createElement("label",null,"Natural Language Triggers"),n?a.createElement(a.Fragment,null,a.createElement(o,{values:l,onChange:t=>{const n=e.triggers.map(e=>"natural_language"===e.type?{...e,value:t}:e);A(e.id,{triggers:n})},placeholder:"Type natural language trigger and press Enter",disabled:!t.enablePolicies}),a.createElement("div",{className:"form-group",style:{marginTop:"12px"}},a.createElement("label",null,"Similarity Threshold"),a.createElement("input",{type:"range",min:"0.5",max:"1.0",step:"0.05",value:n.threshold||.7,onChange:t=>{const n=e.triggers.map(e=>"natural_language"===e.type?{...e,threshold:parseFloat(t.target.value)}:e);A(e.id,{triggers:n})},disabled:!t.enablePolicies}),a.createElement("small",null,"Threshold: ",(n.threshold||.7).toFixed(2)," (higher = more strict matching)")),a.createElement("button",{onClick:()=>{const t=e.triggers.filter(e=>"natural_language"!==e.type);A(e.id,{triggers:t})},disabled:!t.enablePolicies,style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:t.enablePolicies?"pointer":"not-allowed",fontSize:"12px"}},"Remove Natural Language Trigger")):a.createElement("button",{onClick:()=>{A(e.id,{triggers:[...e.triggers,{type:"natural_language",value:[],target:"intent",threshold:.7}]})},disabled:!t.enablePolicies,style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:t.enablePolicies?"pointer":"not-allowed",fontSize:"13px"}},"+ Add Natural Language Trigger"),a.createElement("small",null,"Type natural language triggers and press Enter to add. AI will match similar intents using semantic understanding."))})(),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Response Message"),a.createElement("textarea",{value:e.response.content,onChange:t=>A(e.id,{response:{...e.response,content:t.target.value}}),placeholder:"This action is not allowed.",rows:3,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-row"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Priority"),a.createElement("input",{type:"number",value:e.priority,onChange:t=>A(e.id,{priority:parseInt(t.target.value)}),min:"0",max:"100",disabled:!t.enablePolicies}),a.createElement("small",null,"Higher priority policies are checked first")),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"checkbox-label"},a.createElement("input",{type:"checkbox",checked:e.allow_override,onChange:t=>A(e.id,{allow_override:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("span",null,"Allow Override")),a.createElement("small",null,"User can bypass this policy")))))})),0===T.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No intent guards configured. Click "Add Intent Guard" to create one.'))),"playbook"===i&&a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Playbooks"),a.createElement("button",{className:"add-btn",onClick:N,disabled:!t.enablePolicies},a.createElement(l.FWt,{size:16}),"Add Playbook")),a.createElement("div",{className:"sources-list"},P.map(e=>{const n=c===e.id,r=e.triggers.find(e=>"keyword"===e.type),i=r&&Array.isArray(r.value)?r.value:[];return a.createElement("div",{key:e.id,className:"agent-config-card"},a.createElement("div",{className:"agent-config-header"},a.createElement("div",{className:"agent-config-top"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>A(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("input",{type:"text",value:e.name,onChange:t=>A(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Playbook Name",disabled:!t.enablePolicies}),a.createElement("button",{className:"expand-btn",onClick:()=>d(n?null:e.id)},n?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),a.createElement("button",{className:"delete-btn",onClick:()=>z(e.id),disabled:!t.enablePolicies},a.createElement(l.TBR,{size:16}))),!n&&a.createElement("div",{className:"agent-summary"},a.createElement("span",{className:"agent-summary-item"},e.steps.length," step",1!==e.steps.length?"s":""),e.triggers.length>0&&a.createElement("span",{className:"agent-summary-item"},"natural_language"===e.triggers[0].type?"AI trigger":`${i.length} keyword${1!==i.length?"s":""}`))),n&&a.createElement("div",{className:"agent-config-details"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Description"),a.createElement("textarea",{value:e.description,onChange:t=>A(e.id,{description:t.target.value}),placeholder:"What this playbook guides the user through...",rows:2,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Trigger Type"),a.createElement("select",{value:e.triggers.length>0&&"natural_language"===e.triggers[0].type?"natural_language":"keyword",onChange:t=>{const n=t.target.value;A(e.id,"natural_language"===n?{triggers:[{type:"natural_language",value:[],target:"intent",threshold:.7}]}:{triggers:[{type:"keyword",value:[],target:"intent",case_sensitive:!1,operator:"and"}]})},disabled:!t.enablePolicies},a.createElement("option",{value:"keyword"},"Keywords (Exact Match)"),a.createElement("option",{value:"natural_language"},"Natural Language (AI Match)")),a.createElement("small",null,"Choose how this playbook should be triggered")),e.triggers.length>0&&"keyword"===e.triggers[0].type&&a.createElement(a.Fragment,null,a.createElement("div",{className:"form-group"},a.createElement("label",null,"Trigger Keywords"),a.createElement(o,{values:i,onChange:t=>{const n=e.triggers.map(e=>"keyword"===e.type?{...e,value:t}:e);A(e.id,{triggers:n})},placeholder:"Type keyword and press Enter or comma",disabled:!t.enablePolicies}),a.createElement("small",null,"Type keywords and press Enter or comma to add. Click × to remove.")),i.length>1&&a.createElement("div",{className:"form-group"},a.createElement("label",null,"Keyword Matching"),a.createElement("select",{value:r?.operator||"and",onChange:t=>{const n=t.target.value,a=e.triggers.map(e=>"keyword"===e.type?{...e,operator:n}:e);A(e.id,{triggers:a})},disabled:!t.enablePolicies},a.createElement("option",{value:"and"},"Match ALL keywords (AND)"),a.createElement("option",{value:"or"},"Match ANY keyword (OR)")),a.createElement("small",null,"Choose whether all keywords or any keyword should trigger this playbook"))),e.triggers.length>0&&"natural_language"===e.triggers[0].type&&a.createElement(a.Fragment,null,a.createElement("div",{className:"form-group"},a.createElement("label",null,"Natural Language Triggers"),a.createElement(o,{values:Array.isArray(e.triggers[0].value)?e.triggers[0].value:e.triggers[0].value?[e.triggers[0].value]:[],onChange:t=>{const n=e.triggers.map((e,n)=>0===n?{...e,value:t}:e);A(e.id,{triggers:n})},placeholder:"Type trigger and press Enter",disabled:!t.enablePolicies}),a.createElement("small",null,"Type natural language triggers and press Enter to add. AI will match similar user requests.")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Similarity Threshold"),a.createElement("input",{type:"range",min:"0.5",max:"1.0",step:"0.05",value:e.triggers[0].threshold||.7,onChange:t=>{const n=e.triggers.map((e,n)=>0===n?{...e,threshold:parseFloat(t.target.value)}:e);A(e.id,{triggers:n})},disabled:!t.enablePolicies}),a.createElement("small",null,"Threshold: ",(e.triggers[0].threshold||.7).toFixed(2)," (higher = more strict matching)"))),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Markdown Content"),a.createElement("textarea",{value:e.markdown_content,onChange:t=>A(e.id,{markdown_content:t.target.value}),placeholder:"# Task Guide ## Steps: 1. First step\n2. Second step",rows:8,disabled:!t.enablePolicies,style:{fontFamily:"monospace",fontSize:"13px"}}),a.createElement("small",null,"Markdown-formatted guidance that will be shown to the agent")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Priority"),a.createElement("input",{type:"number",value:e.priority,onChange:t=>A(e.id,{priority:parseInt(t.target.value)}),min:"0",max:"100",disabled:!t.enablePolicies}),a.createElement("small",null,"Higher priority playbooks are checked first"))))})),0===P.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No playbooks configured. Click "Add Playbook" to create one.'))),"tool_guide"===i&&a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Tool Guide Policies"),a.createElement("button",{className:"add-btn",onClick:C,disabled:!t.enablePolicies},a.createElement(l.FWt,{size:16}),"Add Tool Guide")),a.createElement("div",{className:"sources-list"},M.map(e=>{const n=c===e.id;return a.createElement("div",{key:e.id,className:"agent-config-card"},a.createElement("div",{className:"agent-config-header"},a.createElement("div",{className:"agent-config-top"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>A(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("input",{type:"text",value:e.name,onChange:t=>A(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),a.createElement("button",{className:"expand-btn",onClick:()=>d(n?null:e.id)},n?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),a.createElement("button",{className:"delete-btn",onClick:()=>z(e.id),disabled:!t.enablePolicies},a.createElement(l.TBR,{size:16}))),!n&&a.createElement("div",{className:"agent-summary"},a.createElement("span",{className:"agent-summary-item"},e.target_tools.includes("*")?"All tools":`${e.target_tools.length} tool(s)`),e.target_apps&&e.target_apps.length>0&&a.createElement("span",{className:"agent-summary-item"},e.target_apps.length," app(s)"),a.createElement("span",{className:"agent-summary-item"},"Priority: ",e.priority))),n&&a.createElement("div",{className:"agent-config-details"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Description"),a.createElement("textarea",{value:e.description,onChange:t=>A(e.id,{description:t.target.value}),rows:2,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Target Tools"),a.createElement(r,{items:b.map(e=>({value:e.name,label:e.name,description:`${e.app} - ${e.description.substring(0,60)}${e.description.length>60?"...":""}`})),selectedValues:e.target_tools,onChange:t=>A(e.id,{target_tools:t}),placeholder:x?"Loading tools...":"Select tools to enrich",disabled:!t.enablePolicies||x,allowWildcard:!0}),a.createElement("small",null,"Select specific tools to enrich, or use * to enrich all tools")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Target Apps (optional)"),a.createElement(r,{items:h.map(e=>({value:e.name,label:e.name,description:`${e.type} - ${e.tool_count} tool(s)`})),selectedValues:e.target_apps||[],onChange:t=>A(e.id,{target_apps:t.length>0?t:void 0}),placeholder:x?"Loading apps...":"Select apps (optional)",disabled:!t.enablePolicies||x,allowWildcard:!1}),a.createElement("small",null,"Optionally filter by app name")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Guide Content (Markdown)"),a.createElement("textarea",{value:e.guide_content,onChange:t=>A(e.id,{guide_content:t.target.value}),placeholder:"## Additional Guidelines - Follow best practices\n- Consider security",rows:6,disabled:!t.enablePolicies,style:{fontFamily:"monospace",fontSize:"13px"}}),a.createElement("small",null,"Markdown content to add to tool descriptions")),a.createElement("div",{className:"form-group"},a.createElement("label",null,a.createElement("input",{type:"checkbox",checked:e.prepend,onChange:t=>A(e.id,{prepend:t.target.checked}),disabled:!t.enablePolicies}),"Prepend content (add before existing description)")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Priority"),a.createElement("input",{type:"number",value:e.priority,onChange:t=>A(e.id,{priority:parseInt(t.target.value)}),min:"0",max:"100",disabled:!t.enablePolicies}),a.createElement("small",null,"Higher priority guides are applied first"))))})),0===M.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No tool guide policies configured. Click "Add Tool Guide" to create one.'))),"tool_approval"===i&&a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Tool Approval Policies"),a.createElement("button",{className:"add-btn",onClick:_,disabled:!t.enablePolicies},a.createElement(l.FWt,{size:16}),"Add Tool Approval")),a.createElement("div",{className:"policies-list"},I.map(e=>{const n=c===e.id;return a.createElement("div",{key:e.id,className:"agent-config-card"},a.createElement("div",{className:"agent-config-header"},a.createElement("div",{className:"agent-config-top"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>A(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("input",{type:"text",value:e.name,onChange:t=>A(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),a.createElement("button",{className:"expand-btn",onClick:()=>d(n?null:e.id)},n?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),a.createElement("button",{className:"delete-btn",onClick:()=>z(e.id),disabled:!t.enablePolicies},a.createElement(l.TBR,{size:16}))),!n&&a.createElement("div",{className:"agent-summary"},a.createElement("span",{className:"agent-summary-item"},0===e.required_tools.length?"No tools selected":e.required_tools.includes("*")?"All tools":`${e.required_tools.length} tool(s)`),e.required_apps&&e.required_apps.length>0&&a.createElement("span",{className:"agent-summary-item"},e.required_apps.length," app(s)"),a.createElement("span",{className:"agent-summary-item"},"Priority: ",e.priority))),n&&a.createElement("div",{className:"agent-config-details"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Description"),a.createElement("textarea",{value:e.description,onChange:t=>A(e.id,{description:t.target.value}),rows:2,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Required Tools"),a.createElement(r,{items:b.map(e=>({value:e.name,label:e.name,description:`${e.app} - ${e.description.substring(0,60)}${e.description.length>60?"...":""}`})),selectedValues:e.required_tools,onChange:t=>A(e.id,{required_tools:t}),placeholder:x?"Loading tools...":"Select tools requiring approval",disabled:!t.enablePolicies||x,allowWildcard:!0}),a.createElement("small",null,"Tools that require approval before execution")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Required Apps (optional)"),a.createElement(r,{items:h.map(e=>({value:e.name,label:e.name,description:`${e.type} - ${e.tool_count} tool(s)`})),selectedValues:e.required_apps||[],onChange:t=>A(e.id,{required_apps:t.length>0?t:void 0}),placeholder:x?"Loading apps...":"Select apps (optional)",disabled:!t.enablePolicies||x,allowWildcard:!1}),a.createElement("small",null,"Optionally require approval for all tools from specific apps")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Approval Message (optional)"),a.createElement("textarea",{value:e.approval_message||"",onChange:t=>A(e.id,{approval_message:t.target.value||void 0}),placeholder:"This tool requires your approval before execution.",rows:3,disabled:!t.enablePolicies}),a.createElement("small",null,"Custom message shown when requesting approval")),a.createElement("div",{className:"form-group"},a.createElement("label",null,a.createElement("input",{type:"checkbox",checked:e.show_code_preview,onChange:t=>A(e.id,{show_code_preview:t.target.checked}),disabled:!t.enablePolicies}),"Show code preview in approval request")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Auto-approve after (seconds, optional)"),a.createElement("input",{type:"number",value:e.auto_approve_after||"",onChange:t=>{const n=t.target.value?parseInt(t.target.value):void 0;A(e.id,{auto_approve_after:n})},min:"1",placeholder:"Leave empty for no auto-approve",disabled:!t.enablePolicies}),a.createElement("small",null,"Automatically approve after N seconds (leave empty to disable)")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Priority"),a.createElement("input",{type:"number",value:e.priority,onChange:t=>A(e.id,{priority:parseInt(t.target.value)}),min:"0",max:"100",disabled:!t.enablePolicies}),a.createElement("small",null,"Higher priority approval policies are checked first"))))})),0===I.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No tool approval policies configured. Click "Add Tool Approval" to create one.'))),"output_formatter"===i&&a.createElement("div",{className:"config-card"},a.createElement("div",{className:"section-header"},a.createElement("h3",null,"Output Formatter Policies"),a.createElement("button",{className:"add-btn",onClick:S,disabled:!t.enablePolicies},a.createElement(l.FWt,{size:16}),"Add Output Formatter")),a.createElement("div",{className:"policies-list"},R.map(e=>{const n=c===e.id,r=e.triggers.find(e=>"keyword"===e.type),i=r&&Array.isArray(r.value)?r.value:[];return a.createElement("div",{key:e.id,className:"agent-config-card"},a.createElement("div",{className:"agent-config-header"},a.createElement("div",{className:"agent-config-top"},a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>A(e.id,{enabled:t.target.checked}),disabled:!t.enablePolicies}),a.createElement("input",{type:"text",value:e.name,onChange:t=>A(e.id,{name:t.target.value}),className:"agent-config-name",placeholder:"Policy Name",disabled:!t.enablePolicies}),a.createElement("button",{className:"expand-btn",onClick:()=>d(n?null:e.id)},n?a.createElement(l.rXn,{size:16}):a.createElement(l.yQN,{size:16})),a.createElement("button",{className:"delete-btn",onClick:()=>z(e.id),disabled:!t.enablePolicies},a.createElement(l.TBR,{size:16}))),!n&&a.createElement("div",{className:"agent-summary"},a.createElement("span",{className:"agent-summary-item"},"direct"===e.format_type?"Direct":"markdown"===e.format_type?"Markdown (LLM)":"JSON (LLM)"),i.length>0&&a.createElement("span",{className:"agent-summary-item"},i.length," keyword",1!==i.length?"s":""),e.triggers.some(e=>"natural_language"===e.type)&&a.createElement("span",{className:"agent-summary-item"},"AI trigger"),a.createElement("span",{className:"agent-summary-item"},"Priority: ",e.priority))),n&&a.createElement("div",{className:"agent-config-details"},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Description"),a.createElement("textarea",{value:e.description,onChange:t=>A(e.id,{description:t.target.value}),rows:2,disabled:!t.enablePolicies})),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Trigger Keywords (Optional)"),a.createElement(o,{values:i,onChange:t=>{const n=e.triggers.filter(e=>"keyword"!==e.type);if(t.length>0){const a=e.triggers.find(e=>"keyword"===e.type);n.push({type:"keyword",value:t,target:"agent_response",case_sensitive:!1,operator:a?.operator||"and"})}A(e.id,{triggers:n})},placeholder:"Type keyword and press Enter or comma",disabled:!t.enablePolicies}),a.createElement("small",null,"Keywords to match against the last AI message content. Leave empty to always format.")),i.length>1&&a.createElement("div",{className:"form-group"},a.createElement("label",null,"Keyword Matching"),a.createElement("select",{value:r?.operator||"and",onChange:t=>{const n=t.target.value,a=e.triggers.map(e=>"keyword"===e.type?{...e,operator:n}:e);A(e.id,{triggers:a})},disabled:!t.enablePolicies},a.createElement("option",{value:"and"},"Match ALL keywords (AND)"),a.createElement("option",{value:"or"},"Match ANY keyword (OR)")),a.createElement("small",null,"Choose whether all keywords or any keyword should trigger this formatter")),(()=>{const n=e.triggers.find(e=>"natural_language"===e.type),l=n?Array.isArray(n.value)?n.value:n.value?[n.value]:[]:[];return a.createElement("div",{className:"form-group"},a.createElement("label",null,"Natural Language Triggers"),n?a.createElement(a.Fragment,null,a.createElement(o,{values:l,onChange:t=>{const n=e.triggers.map(e=>"natural_language"===e.type?{...e,value:t}:e);A(e.id,{triggers:n})},placeholder:"Type natural language trigger and press Enter",disabled:!t.enablePolicies}),a.createElement("div",{className:"form-group",style:{marginTop:"12px"}},a.createElement("label",null,"Similarity Threshold"),a.createElement("input",{type:"range",min:"0.5",max:"1.0",step:"0.05",value:n.threshold||.7,onChange:t=>{const n=e.triggers.map(e=>"natural_language"===e.type?{...e,threshold:parseFloat(t.target.value)}:e);A(e.id,{triggers:n})},disabled:!t.enablePolicies}),a.createElement("small",null,"Threshold: ",(n.threshold||.7).toFixed(2)," (higher = more strict matching)")),a.createElement("button",{onClick:()=>{const t=e.triggers.filter(e=>"natural_language"!==e.type);A(e.id,{triggers:t})},disabled:!t.enablePolicies,style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:t.enablePolicies?"pointer":"not-allowed",fontSize:"12px"}},"Remove Natural Language Trigger")):a.createElement("button",{onClick:()=>{A(e.id,{triggers:[...e.triggers,{type:"natural_language",value:[],target:"agent_response",threshold:.7}]})},disabled:!t.enablePolicies,style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:t.enablePolicies?"pointer":"not-allowed",fontSize:"13px"}},"+ Add Natural Language Trigger"),a.createElement("small",null,"Type natural language triggers and press Enter to add. AI will match similar responses using semantic understanding."))})(),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Format Type"),a.createElement("select",{value:e.format_type,onChange:t=>A(e.id,{format_type:t.target.value}),disabled:!t.enablePolicies},a.createElement("option",{value:"direct"},"Direct Answer (No LLM)"),a.createElement("option",{value:"markdown"},"Markdown Instructions (LLM)"),a.createElement("option",{value:"json_schema"},"JSON Schema (LLM)")),a.createElement("small",null,"direct"===e.format_type?"Directly replace the response with the provided string (no LLM processing)":"markdown"===e.format_type?"Use LLM to reformat the response according to markdown instructions":"Use LLM to extract and format the response as JSON matching the schema")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"direct"===e.format_type?"Direct Answer String":"markdown"===e.format_type?"Formatting Instructions (Markdown)":"JSON Schema"),a.createElement("textarea",{value:e.format_config,onChange:t=>A(e.id,{format_config:t.target.value}),placeholder:"direct"===e.format_type?"You are not allowed to view this sensitive data":"markdown"===e.format_type?"Format the response in a clear, structured way with proper headings and bullet points.":'{\n  "type": "object",\n  "properties": {\n    "summary": {"type": "string"},\n    "details": {"type": "array"}\n  }\n}',rows:"json_schema"===e.format_type?12:"direct"===e.format_type?4:8,disabled:!t.enablePolicies,style:{fontFamily:"direct"===e.format_type?"inherit":"monospace",fontSize:"13px"}}),a.createElement("small",null,"direct"===e.format_type?"This exact string will replace the AI response when triggers match (no LLM processing)":"markdown"===e.format_type?"Markdown instructions for how to format the AI response (processed by LLM)":"JSON schema that the formatted response must match (processed by LLM)")),a.createElement("div",{className:"form-group"},a.createElement("label",null,"Priority"),a.createElement("input",{type:"number",value:e.priority,onChange:t=>A(e.id,{priority:parseInt(t.target.value)}),min:"0",max:"100",disabled:!t.enablePolicies}),a.createElement("small",null,"Higher priority formatters are checked first"))))})),0===R.length&&a.createElement("div",{className:"empty-state"},a.createElement("p",null,'No output formatter policies configured. Click "Add Output Formatter" to create one.'))))),a.createElement("div",{className:"config-modal-footer"},a.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),a.createElement("button",{className:`save-btn ${m}`,onClick:async()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await new Promise(e=>setTimeout(e,50)),p("saving");try{const e={...t,policies:t.policies.map(e=>({...e,triggers:e.triggers.map(e=>{if("natural_language"===e.type&&void 0!==e.value){const t=Array.isArray(e.value)?e.value:"string"==typeof e.value?[e.value]:[];return{...e,value:t}}return e})}))};e.policies.forEach((e,t)=>{e.triggers.forEach((e,t)=>{"keyword"===e.type||e.type})});const n=await fetch("/api/config/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.ok){await n.json();p("success"),setTimeout(()=>p("idle"),2e3)}else{await n.text();p("error"),setTimeout(()=>p("idle"),2e3)}}catch(e){p("error"),setTimeout(()=>p("idle"),2e3)}},disabled:"saving"===m},a.createElement(l.eMP,{size:16}),"idle"===m&&"Save Changes","saving"===m&&"Saving...","success"===m&&"Saved!","error"===m&&"Error!"))))}},83809:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,".file-autocomplete {\n  position: fixed;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  z-index: 99999;\n  min-width: 320px;\n  max-width: 500px;\n  animation: slideUpFade 0.2s ease;\n  pointer-events: auto;\n}\n\n@keyframes slideUpFade {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.file-autocomplete-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  font-size: 11px;\n  font-weight: 600;\n  border-radius: 8px 8px 0 0;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.file-count {\n  background: rgba(255, 255, 255, 0.2);\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-size: 10px;\n}\n\n.file-autocomplete-list {\n  max-height: 400px;\n  overflow-y: auto;\n  padding: 4px;\n}\n\n.file-autocomplete-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  margin-bottom: 2px;\n}\n\n.file-autocomplete-item:hover,\n.file-autocomplete-item.selected {\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n}\n\n.file-autocomplete-item.selected {\n  border-left: 3px solid #667eea;\n  padding-left: 7px;\n}\n\n.file-icon {\n  flex-shrink: 0;\n  color: #667eea;\n}\n\n.file-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n\n.file-name {\n  font-size: 13px;\n  font-weight: 500;\n  color: #1f2937;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.file-path {\n  font-size: 11px;\n  color: #6b7280;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.file-autocomplete-footer {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border-top: 1px solid #e5e7eb;\n  border-radius: 0 0 8px 8px;\n}\n\n.hint {\n  font-size: 10px;\n  color: #9ca3af;\n  font-style: italic;\n}\n\n.file-autocomplete-list::-webkit-scrollbar {\n  width: 6px;\n}\n\n.file-autocomplete-list::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.file-autocomplete-list::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.file-autocomplete-list::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n",""]),t.A=o},84870:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,'.debug-panel-container {\n  position: fixed;\n  bottom: 20px;\n  right: 100px;\n  z-index: 1000;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n}\n\n.debug-panel-toggle {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  transition: all 0.2s ease;\n}\n\n.debug-panel-toggle:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n.debug-panel-content {\n  position: absolute;\n  bottom: 50px;\n  right: 0;\n  width: 500px;\n  max-height: 600px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.debug-panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.debug-panel-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.debug-panel-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.debug-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.debug-action-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.debug-action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.debug-action-btn .spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.debug-auto-refresh {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.debug-auto-refresh input[type="checkbox"] {\n  cursor: pointer;\n}\n\n.debug-section {\n  padding: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.debug-section:last-child {\n  border-bottom: none;\n}\n\n.debug-section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.debug-section-header strong {\n  font-size: 14px;\n  font-weight: 600;\n  color: #374151;\n}\n\n.debug-copy-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  background: #f3f4f6;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #6b7280;\n}\n\n.debug-copy-btn:hover {\n  background: #e5e7eb;\n  color: #374151;\n}\n\n.debug-thread-id {\n  font-family: "Monaco", "Menlo", "Courier New", monospace;\n  font-size: 12px;\n  padding: 10px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  word-break: break-all;\n  color: #111827;\n}\n\n.debug-state-content {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.debug-state-item {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.debug-state-item.debug-variables {\n  margin-top: 8px;\n}\n\n.debug-label {\n  font-size: 12px;\n  font-weight: 600;\n  color: #6b7280;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.debug-value {\n  font-size: 13px;\n  color: #111827;\n  word-break: break-word;\n}\n\n.debug-json {\n  font-family: "Monaco", "Menlo", "Courier New", monospace;\n  font-size: 11px;\n  padding: 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  overflow-x: auto;\n  max-height: 300px;\n  overflow-y: auto;\n  margin: 0;\n  color: #111827;\n  line-height: 1.5;\n}\n\n.debug-loading {\n  padding: 12px;\n  text-align: center;\n  color: #6b7280;\n  font-size: 13px;\n}\n\n.debug-error {\n  padding: 12px;\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 6px;\n  color: #dc2626;\n  font-size: 13px;\n}\n\n',""]),t.A=o},90313:function(e,t,n){var a=n(21598),l=n.n(a),r=n(2607),o=n.n(r)()(l());o.push([e.id,".tour-overly {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 9998;\n  animation: tourFadeIn 0.3s ease;\n}\n\n@keyframes tourFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.tour-highlight {\n  position: fixed;\n  background: transparent;\n  border: 3px solid #667eea;\n  border-radius: 8px;\n  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 20px rgba(102, 126, 234, 0.8);\n  z-index: 9999;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  pointer-events: none;\n  animation: tourPulse 2s ease-in-out infinite;\n}\n\n@keyframes tourPulse {\n  0%, 100% {\n    border-color: #667eea;\n    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 20px rgba(102, 126, 234, 0.8);\n  }\n  50% {\n    border-color: #764ba2;\n    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 30px rgba(118, 75, 162, 1);\n  }\n}\n\n.tour-tooltip {\n  position: fixed;\n  width: 320px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  z-index: 10000;\n  animation: tourSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  overflow: hidden;\n}\n\n@keyframes tourSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n.tour-tooltip-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.tour-step-counter {\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.tour-close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 28px;\n  height: 28px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.tour-close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: scale(1.05);\n}\n\n.tour-tooltip-content {\n  padding: 20px;\n}\n\n.tour-tooltip-title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #1e293b;\n  margin: 0 0 12px 0;\n  line-height: 1.3;\n}\n\n.tour-tooltip-text {\n  font-size: 14px;\n  color: #64748b;\n  line-height: 1.6;\n  margin: 0;\n}\n\n.tour-tooltip-footer {\n  padding: 0 16px 16px;\n}\n\n.tour-progress-bar {\n  height: 4px;\n  background: #e2e8f0;\n  border-radius: 2px;\n  overflow: hidden;\n  margin-bottom: 12px;\n}\n\n.tour-progress-fill {\n  height: 100%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 2px;\n  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.tour-tooltip-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n}\n\n.tour-navigation {\n  display: flex;\n  gap: 8px;\n}\n\n.tour-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-family: inherit;\n}\n\n.tour-btn-primary {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n\n.tour-btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n.tour-btn-primary:active {\n  transform: translateY(0);\n}\n\n.tour-btn-secondary {\n  background: transparent;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n}\n\n.tour-btn-secondary:hover {\n  background: #f8fafc;\n  border-color: #cbd5e1;\n  color: #475569;\n}\n\n.tour-btn-icon {\n  padding: 8px;\n  background: #f8fafc;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n}\n\n.tour-btn-icon:hover:not(:disabled) {\n  background: #f1f5f9;\n  border-color: #cbd5e1;\n  color: #475569;\n}\n\n.tour-btn-icon:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.tour-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n@media (max-width: 640px) {\n  .tour-tooltip {\n    width: calc(100% - 32px);\n    max-width: 320px;\n    left: 16px !important;\n    right: 16px;\n  }\n\n  .tour-tooltip-content {\n    padding: 16px;\n  }\n\n  .tour-tooltip-title {\n    font-size: 16px;\n  }\n\n  .tour-tooltip-text {\n    font-size: 13px;\n  }\n\n  .tour-btn {\n    padding: 6px 12px;\n    font-size: 12px;\n  }\n}\n\n",""]),t.A=o}}]);